<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Recoding a forced choice item with a text field • eatGADS</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Recoding a forced choice item with a text field">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">eatGADS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/createGADS.html">`createGADS`: Creating a relational data base</a></li>
    <li><a class="dropdown-item" href="../articles/data_cleaning.html">Comprehensive Data Cleaning Guide</a></li>
    <li><a class="dropdown-item" href="../articles/getGADS.html">`getGADS`: Using a relational eatGADS data base</a></li>
    <li><a class="dropdown-item" href="../articles/import_raw.html">Handling meta data</a></li>
    <li><a class="dropdown-item" href="../articles/import_spss.html">`import_spss`: Importing data from 'SPSS'</a></li>
    <li><a class="dropdown-item" href="../articles/recoding_forcedChoice.html">Recoding a forced choice item with a text field</a></li>
    <li><a class="dropdown-item" href="../articles/recoding_multipleChoice.html">Recoding a multiple choice item with a text field</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/beckerbenj/eatGADS/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Recoding a forced choice item with a text field</h1>
                        <h4 data-toc-skip class="author">Benjamin
Becker, Johanna Busse</h4>
            
            <h4 data-toc-skip class="date">2025-07-17</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/beckerbenj/eatGADS/blob/master/vignettes/recoding_forcedChoice.rmd" class="external-link"><code>vignettes/recoding_forcedChoice.rmd</code></a></small>
      <div class="d-none name"><code>recoding_forcedChoice.rmd</code></div>
    </div>

    
    
<p>Forced choice items are multiple choice items with exclusive answer
options (only one option can be chosen). If a forced choice item is
administered, sometimes not all possible answers can be covered by
predefined response options. In such cases, often an additional response
option (e.g. “other option”, “something else”, …) is given accompanied
by an open text field. An example of such a multiple choice item is
asking for the birthplace of a person:</p>
<p> </p>
<p><img src="forcedChoice.PNG"></p>
<p> </p>
<p>However, in the resulting data set such an item will often be stored
as two separate variables: a numeric variable with value labels
(containing the existing response options) and a character variable
(containing the answers in the text field). For data analysis, usually a
single numerical and labeled variable is desirable. Often the following
steps are required:</p>
<ul>
<li>recode the character variable manually (e.g. to eliminate spelling
mistakes)</li>
<li>transform open answers which refer to existing response options
(e.g. if a test taker overlooked a response option)</li>
<li>summarize both remaining variables into a single numerical, labeled
variable</li>
</ul>
<p>To illustrate the steps we have implemented a small <code>SPSS</code>
example data set in this package. The data set can be loaded using the
<code><a href="../reference/import_spss.html">import_spss()</a></code> function. For further information on
importing <code>SPSS</code> data see <a href="import_spss.html"><code>import_spss</code>: Importing data from
‘SPSS’</a>. Note that the data set is a minimal working example,
containing only the required variables for this illustration.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/beckerbenj/eatGADS" class="external-link">eatGADS</a></span><span class="op">)</span></span>
<span><span class="va">data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"forcedChoice.sav"</span>, package <span class="op">=</span> <span class="st">"eatGADS"</span><span class="op">)</span></span>
<span><span class="va">gads</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_spss.html">import_spss</a></span><span class="op">(</span><span class="va">data_path</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show example data set</span></span>
<span><span class="va">gads</span></span>
<span><span class="co">#&gt; $dat</span></span>
<span><span class="co">#&gt;    ID mcvar stringvar</span></span>
<span><span class="co">#&gt; 1   1     3          </span></span>
<span><span class="co">#&gt; 2   2     2     Italy</span></span>
<span><span class="co">#&gt; 3   3     3   England</span></span>
<span><span class="co">#&gt; 4   4     3       Ita</span></span>
<span><span class="co">#&gt; 5   5     3       Eng</span></span>
<span><span class="co">#&gt; 6   6    NA    German</span></span>
<span><span class="co">#&gt; 7   7     1      Germ</span></span>
<span><span class="co">#&gt; 8   8     2          </span></span>
<span><span class="co">#&gt; 9   9     3          </span></span>
<span><span class="co">#&gt; 10 10     3       Eng</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $labels</span></span>
<span><span class="co">#&gt;     varName varLabel format display_width labeled value valLabel missings</span></span>
<span><span class="co">#&gt; 1        ID     &lt;NA&gt;   F8.0            NA      no    NA     &lt;NA&gt;     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2     mcvar     &lt;NA&gt;   F8.2            NA     yes     1  Germany    valid</span></span>
<span><span class="co">#&gt; 3     mcvar     &lt;NA&gt;   F8.2            NA     yes     2   Poland    valid</span></span>
<span><span class="co">#&gt; 4     mcvar     &lt;NA&gt;   F8.2            NA     yes     3    other    valid</span></span>
<span><span class="co">#&gt; 5     mcvar     &lt;NA&gt;   F8.2            NA     yes   -99  missing     miss</span></span>
<span><span class="co">#&gt; 6 stringvar     &lt;NA&gt;     A7            NA      no    NA     &lt;NA&gt;     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "GADSdat" "list"</span></span></code></pre></div>
<p>The variable names of the data set above are connected to the forced
choice question as indicated:</p>
<p> </p>
<p><img src="forcedChoice_labeled.PNG"></p>
<div class="section level2">
<h2 id="preparing-the-data-set">Preparing the data set<a class="anchor" aria-label="anchor" href="#preparing-the-data-set"></a>
</h2>
<p>As illustrated, data can be loaded into <code>R</code> in the
<code>GADSdat</code> format via the functions
<code><a href="../reference/import_spss.html">import_spss()</a></code>, <code><a href="../reference/import_DF.html">import_DF()</a></code> or
<code><a href="../reference/import_raw.html">import_raw()</a></code>. Depending on the original format, omitted
responses to open text fields might be stored as empty strings instead
of <code>NAs</code>. In these cases, the <code><a href="../reference/recode2NA.html">recode2NA()</a></code>
function should be used to recode these values to <code>NA</code>. Per
default, matching strings across all variables in the data set are
recoded. Specific variables selection can be specified using the
<code>recodeVars</code> argument. Note that the function only performs
recodings to exact matches of a single, specific value (in our example
<code>""</code>).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gads</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/recode2NA.html">recode2NA</a></span><span class="op">(</span><span class="va">gads</span>, value <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span><span class="co">#&gt; Recodes in variable ID: 0</span></span>
<span><span class="co">#&gt; Recodes in variable mcvar: 0</span></span>
<span><span class="co">#&gt; Recodes in variable stringvar: 3</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creating-and-editing-a-lookup-table">Creating and editing a lookup table<a class="anchor" aria-label="anchor" href="#creating-and-editing-a-lookup-table"></a>
</h2>
<p>With <code><a href="../reference/createLookup.html">createLookup()</a></code>, you can create a lookup table which
allows recoding one or multiple variables.<br>
You can choose which string variables in a <code>GADSdat</code> object
you would like to recode by using the <code>recodeVars</code> argument.
The resulting lookup table is a long format <code>data.frame</code> with
rows being variable x value pairings. In case you want to sort the
output to make recoding easier, the argument <code>sort_by</code> can be
used. Extra columns can be added to the lookup table by the argument
<code>addCols</code> (but can also be added later manually e.g. in
Excel). The respective column names are irrelevant and just for
convenience purpose.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lookup</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createLookup.html">createLookup</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">gads</span>, recodeVars <span class="op">=</span> <span class="st">"stringvar"</span>, sort_by <span class="op">=</span> <span class="st">'value'</span>, </span>
<span>                       addCols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"new"</span>, <span class="st">"new2"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lookup</span></span>
<span><span class="co">#&gt;    variable   value new new2</span></span>
<span><span class="co">#&gt; 1 stringvar    &lt;NA&gt;  NA   NA</span></span>
<span><span class="co">#&gt; 2 stringvar     Eng  NA   NA</span></span>
<span><span class="co">#&gt; 3 stringvar England  NA   NA</span></span>
<span><span class="co">#&gt; 4 stringvar    Germ  NA   NA</span></span>
<span><span class="co">#&gt; 5 stringvar  German  NA   NA</span></span>
<span><span class="co">#&gt; 6 stringvar     Ita  NA   NA</span></span>
<span><span class="co">#&gt; 7 stringvar   Italy  NA   NA</span></span></code></pre></div>
<p>Now you have to add the desired values for recoding. You should use
(a) the existing value labels of the corresponding numerical, labeled
variable and (b) consistent new values that can serve as value labels
later. Spelling mistakes within the recoding will result in different
values in the output!<br>
To fill in the columns you could use <code>R</code> directly to modify
the columns. Alternatively, we recommend using
<code>eatAnalysis::write_xlsx()</code> to create an Excel file in which
you can fill in the values.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># write lookup table to Excel</span></span>
<span><span class="fu">eatAnalysis</span><span class="fu">::</span><span class="fu">write_xlsx</span><span class="op">(</span><span class="va">lookup</span>, <span class="st">"lookup_forcedChoice.xlsx"</span><span class="op">)</span></span></code></pre></div>
<p><img src="forcedChoice_excel_empty.PNG"></p>
<p> </p>
<p>After filling out the Excel sheet the lookup table might look like
this:</p>
<p> </p>
<p><img src="forcedChoice_excel_full.PNG"></p>
<p> </p>
<p>The Excel file can be read back into <code>R</code> via
<code>readxl::read_xlsx()</code>. Detailed information on how missing
values should be recoded is provided in the last section of this
vignette.</p>
<p>If you have more than one person working on the variable or if you
want to use templates, you may have 2 different possible recode values
(in our example: <code>new</code> and <code>new2</code>) . You can fill
in both in the lookup table and then choose which one you want to
prioritize later.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># read lookup table back to R</span></span>
<span><span class="va">lookup</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu">read_xlsx</span><span class="op">(</span><span class="st">"lookup_forcedChoice.xlsx"</span><span class="op">)</span></span>
<span><span class="va">lookup</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;    variable   value     new    new2</span></span>
<span><span class="co">#&gt; 1 stringvar    &lt;NA&gt; missing    miss</span></span>
<span><span class="co">#&gt; 2 stringvar     Eng England England</span></span>
<span><span class="co">#&gt; 3 stringvar England    &lt;NA&gt; England</span></span>
<span><span class="co">#&gt; 4 stringvar    Germ Germany    &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5 stringvar  German Germany Germany</span></span>
<span><span class="co">#&gt; 6 stringvar     Ita    &lt;NA&gt;   Italy</span></span>
<span><span class="co">#&gt; 7 stringvar   Italy   Italy   Italy</span></span></code></pre>
<p>We use the <code><a href="../reference/collapseColumns.html">collapseColumns()</a></code> function to get the correct
layout for the final lookup table. The function merges both columns
containing the new values. By using the <code>prioritize</code> argument
you can decide which column will be preferred. Only if there is an
<code>NA</code> in the prioritized column, the other column will be used
instead.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lookup_formatted</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/collapseColumns.html">collapseColumns</a></span><span class="op">(</span>lookup <span class="op">=</span> <span class="va">lookup</span>, recodeVars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"new"</span>, <span class="st">"new2"</span><span class="op">)</span>, </span>
<span>                                    prioritize <span class="op">=</span> <span class="st">"new"</span><span class="op">)</span></span>
<span><span class="va">lookup_formatted</span></span>
<span><span class="co">#&gt;    variable   value value_new</span></span>
<span><span class="co">#&gt; 1 stringvar    &lt;NA&gt;   missing</span></span>
<span><span class="co">#&gt; 2 stringvar     Eng   England</span></span>
<span><span class="co">#&gt; 3 stringvar England   England</span></span>
<span><span class="co">#&gt; 4 stringvar    Germ   Germany</span></span>
<span><span class="co">#&gt; 5 stringvar  German   Germany</span></span>
<span><span class="co">#&gt; 6 stringvar     Ita     Italy</span></span>
<span><span class="co">#&gt; 7 stringvar   Italy     Italy</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="apply-lookup-to-gadsdat">Apply lookup to <code>GADSdat</code><a class="anchor" aria-label="anchor" href="#apply-lookup-to-gadsdat"></a>
</h2>
<p>You perform the actual data recoding using the
<code><a href="../reference/applyLookup.html">applyLookup()</a></code> function. It applies the recodes defined in
the lookup table. This means that if the lookup table was created for
multiple variables, <code><a href="../reference/applyLookup.html">applyLookup()</a></code> performs recoding for all
of these variables simultaneously. If you define a <code>suffix</code>,
the old variable(s) will not be overwritten.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gads_string</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/applyLookup.html">applyLookup</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">gads</span>, lookup <span class="op">=</span> <span class="va">lookup_formatted</span>, suffix <span class="op">=</span> <span class="st">"_r"</span><span class="op">)</span></span>
<span><span class="co">#&gt; No rows removed from meta data.</span></span>
<span><span class="co">#&gt; Adding meta data for the following variables: stringvar_r</span></span>
<span></span>
<span><span class="va">gads_string</span><span class="op">$</span><span class="va">dat</span></span>
<span><span class="co">#&gt;    ID mcvar stringvar stringvar_r</span></span>
<span><span class="co">#&gt; 1   1     3      &lt;NA&gt;     missing</span></span>
<span><span class="co">#&gt; 2   2     2     Italy       Italy</span></span>
<span><span class="co">#&gt; 3   3     3   England     England</span></span>
<span><span class="co">#&gt; 4   4     3       Ita       Italy</span></span>
<span><span class="co">#&gt; 5   5     3       Eng     England</span></span>
<span><span class="co">#&gt; 6   6    NA    German     Germany</span></span>
<span><span class="co">#&gt; 7   7     1      Germ     Germany</span></span>
<span><span class="co">#&gt; 8   8     2      &lt;NA&gt;     missing</span></span>
<span><span class="co">#&gt; 9   9     3      &lt;NA&gt;     missing</span></span>
<span><span class="co">#&gt; 10 10     3       Eng     England</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="integrate-character-and-numeric-variable">Integrate character and numeric variable<a class="anchor" aria-label="anchor" href="#integrate-character-and-numeric-variable"></a>
</h2>
<p>The next step is to integrate the string variable into the integer
via the <code><a href="../reference/collapseMC_Text.html">collapseMC_Text()</a></code> function. With
<code>mc_var</code> and <code>text_var</code> we specify the variables
used for recoding. With the <code>mc_code4text</code> argument we
specify the value label of <code>mc_var</code> which indicates that
<code>text_var</code> contains valid information (in our example
<code>"other"</code>). If the <code>mc_var</code> is missing,
<code>text_var</code> is also utilized (e.g. row 6). If there is a valid
value in <code>mc_var</code> other than the code for
<code>mc_code4text</code>, information in <code>text_var</code> is
ignored (e.g. row 2). New value labels are created for entries in
<code>text_var</code> without corresponding value labels. The new value
labels are ordered alphabetically and inserted after the already
existing ones. Additional information on how missings are treated by the
function can be found in the last section of the vignette.</p>
<p>Note that in contrast to <code><a href="../reference/createLookup.html">createLookup()</a></code>,
<code><a href="../reference/collapseColumns.html">collapseColumns()</a></code> and <code><a href="../reference/applyLookup.html">applyLookup()</a></code> this
function only works on a single forced choice variable pair. Integrating
multiple variable pairs has to be performed in separate steps.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gads_final</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/collapseMC_Text.html">collapseMC_Text</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">gads_string</span>, mc_var <span class="op">=</span> <span class="st">"mcvar"</span>, </span>
<span>                              text_var <span class="op">=</span> <span class="st">"stringvar_r"</span>, mc_code4text <span class="op">=</span> <span class="st">"other"</span>, </span>
<span>                              var_suffix <span class="op">=</span> <span class="st">"_r"</span>, label_suffix <span class="op">=</span> <span class="st">"(recoded)"</span><span class="op">)</span></span>
<span><span class="co">#&gt; No rows removed from meta data.</span></span>
<span><span class="co">#&gt; Adding meta data for the following variables: mcvar_r</span></span>
<span></span>
<span><span class="va">gads_final</span><span class="op">$</span><span class="va">dat</span></span>
<span><span class="co">#&gt;    ID mcvar stringvar stringvar_r mcvar_r</span></span>
<span><span class="co">#&gt; 1   1     3      &lt;NA&gt;     missing     -99</span></span>
<span><span class="co">#&gt; 2   2     2     Italy       Italy       2</span></span>
<span><span class="co">#&gt; 3   3     3   England     England       4</span></span>
<span><span class="co">#&gt; 4   4     3       Ita       Italy       5</span></span>
<span><span class="co">#&gt; 5   5     3       Eng     England       4</span></span>
<span><span class="co">#&gt; 6   6    NA    German     Germany       1</span></span>
<span><span class="co">#&gt; 7   7     1      Germ     Germany       1</span></span>
<span><span class="co">#&gt; 8   8     2      &lt;NA&gt;     missing       2</span></span>
<span><span class="co">#&gt; 9   9     3      &lt;NA&gt;     missing     -99</span></span>
<span><span class="co">#&gt; 10 10     3       Eng     England       4</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads_final</span>, <span class="st">"mcvar_r"</span><span class="op">)</span></span>
<span><span class="co">#&gt;    varName  varLabel format display_width labeled value valLabel missings</span></span>
<span><span class="co">#&gt; 8  mcvar_r (recoded)   F8.2            NA     yes     1  Germany    valid</span></span>
<span><span class="co">#&gt; 9  mcvar_r (recoded)   F8.2            NA     yes     2   Poland    valid</span></span>
<span><span class="co">#&gt; 10 mcvar_r (recoded)   F8.2            NA     yes     3    other    valid</span></span>
<span><span class="co">#&gt; 11 mcvar_r (recoded)   F8.2            NA     yes   -99  missing     miss</span></span>
<span><span class="co">#&gt; 12 mcvar_r (recoded)   F8.2            NA     yes     4  England    valid</span></span>
<span><span class="co">#&gt; 13 mcvar_r (recoded)   F8.2            NA     yes     5    Italy    valid</span></span></code></pre></div>
<p><code><a href="../reference/checkMissings.html">checkMissings()</a></code> is a function for automatically setting
missing values in a <code>GADSdat</code> object. If new values should
receive missing codes, <code><a href="../reference/checkMissings.html">checkMissings()</a></code> would be necessary.
However, in our example no new values representing missings have been
added, therefore the function does not change the <code>GADSdat</code>
object.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gads_final</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/checkMissings.html">checkMissings</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">gads_final</span>, missingLabel <span class="op">=</span> <span class="st">"missing"</span>, </span>
<span>                            addMissingCode <span class="op">=</span> <span class="cn">TRUE</span>, addMissingLabel <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads_final</span>, <span class="st">"mcvar_r"</span><span class="op">)</span></span>
<span><span class="co">#&gt;    varName  varLabel format display_width labeled value valLabel missings</span></span>
<span><span class="co">#&gt; 8  mcvar_r (recoded)   F8.2            NA     yes     1  Germany    valid</span></span>
<span><span class="co">#&gt; 9  mcvar_r (recoded)   F8.2            NA     yes     2   Poland    valid</span></span>
<span><span class="co">#&gt; 10 mcvar_r (recoded)   F8.2            NA     yes     3    other    valid</span></span>
<span><span class="co">#&gt; 11 mcvar_r (recoded)   F8.2            NA     yes   -99  missing     miss</span></span>
<span><span class="co">#&gt; 12 mcvar_r (recoded)   F8.2            NA     yes     4  England    valid</span></span>
<span><span class="co">#&gt; 13 mcvar_r (recoded)   F8.2            NA     yes     5    Italy    valid</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="remove-variables-from-gadsdat">Remove variables from <code>GADSdat</code><a class="anchor" aria-label="anchor" href="#remove-variables-from-gadsdat"></a>
</h2>
<p>In a last step you can remove intermediate or superfluous variables
from the <code>GADSdat</code> object by using the function
<code><a href="../reference/extractVars.html">removeVars()</a></code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gads_final</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extractVars.html">removeVars</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">gads_final</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcvar"</span>, <span class="st">"stringvar_r"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Removing the following rows from meta data: mcvar, stringvar_r</span></span>
<span><span class="co">#&gt; No rows added to meta data.</span></span>
<span><span class="va">gads_final</span><span class="op">$</span><span class="va">dat</span></span>
<span><span class="co">#&gt;    ID stringvar mcvar_r</span></span>
<span><span class="co">#&gt; 1   1      &lt;NA&gt;     -99</span></span>
<span><span class="co">#&gt; 2   2     Italy       2</span></span>
<span><span class="co">#&gt; 3   3   England       4</span></span>
<span><span class="co">#&gt; 4   4       Ita       5</span></span>
<span><span class="co">#&gt; 5   5       Eng       4</span></span>
<span><span class="co">#&gt; 6   6    German       1</span></span>
<span><span class="co">#&gt; 7   7      Germ       1</span></span>
<span><span class="co">#&gt; 8   8      &lt;NA&gt;       2</span></span>
<span><span class="co">#&gt; 9   9      &lt;NA&gt;     -99</span></span>
<span><span class="co">#&gt; 10 10       Eng       4</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="missing-value-codes">Missing value codes<a class="anchor" aria-label="anchor" href="#missing-value-codes"></a>
</h2>
<p>In some scenarios, there might be conceptual differences between
missing codes in the data (e.g. invalid responses, item not
administered, omission). These conceptual differences might require
different integration of the two variables (numerical &amp; labeled,
character) depending on the type of missing. In this section, we
illustrate how <code><a href="../reference/collapseMC_Text.html">collapseMC_Text()</a></code> behaves depending on how
missings are defined in the data.</p>
<p>To illustrate the described behavior, we have included an additional
<code>SPSS</code> data set in the package with a forced choice variable
pair including all possible value and missing combinations. The possible
values in the string variable are <code>new valid</code>, indicating an
arbitrary valid entry, <code>NA</code> indicating for example an
omission and <code>special missing</code>, indicating for example an
invalid entry.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_path_miss</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"forcedChoice_missings.sav"</span>, package <span class="op">=</span> <span class="st">"eatGADS"</span><span class="op">)</span></span>
<span><span class="va">gads_miss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_spss.html">import_spss</a></span><span class="op">(</span><span class="va">data_path_miss</span><span class="op">)</span></span>
<span><span class="va">gads_miss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/recode2NA.html">recode2NA</a></span><span class="op">(</span><span class="va">gads_miss</span>, value <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span><span class="co">#&gt; Recodes in variable ID: 0</span></span>
<span><span class="co">#&gt; Recodes in variable mc: 0</span></span>
<span><span class="co">#&gt; Recodes in variable string: 4</span></span>
<span></span>
<span><span class="co"># Show example data set</span></span>
<span><span class="va">gads_miss</span></span>
<span><span class="co">#&gt; $dat</span></span>
<span><span class="co">#&gt;    ID  mc          string</span></span>
<span><span class="co">#&gt; 1   1   2       new valid</span></span>
<span><span class="co">#&gt; 2   2   1       new valid</span></span>
<span><span class="co">#&gt; 3   3 -99       new valid</span></span>
<span><span class="co">#&gt; 4   4 -98       new valid</span></span>
<span><span class="co">#&gt; 5   5   2            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6   6   1            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 7   7 -99            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 8   8 -98            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 9   9   2 special missing</span></span>
<span><span class="co">#&gt; 10 10   1 special missing</span></span>
<span><span class="co">#&gt; 11 11 -99 special missing</span></span>
<span><span class="co">#&gt; 12 12 -98 special missing</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $labels</span></span>
<span><span class="co">#&gt;   varName varLabel format display_width labeled value        valLabel missings</span></span>
<span><span class="co">#&gt; 1      ID     &lt;NA&gt;   F8.0            NA      no    NA            &lt;NA&gt;     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2      mc     &lt;NA&gt;   F8.2            NA     yes     1           valid    valid</span></span>
<span><span class="co">#&gt; 3      mc     &lt;NA&gt;   F8.2            NA     yes     2           other    valid</span></span>
<span><span class="co">#&gt; 4      mc     &lt;NA&gt;   F8.2            NA     yes   -99 missing omitted     miss</span></span>
<span><span class="co">#&gt; 5      mc     &lt;NA&gt;   F8.2            NA     yes   -98 special missing     miss</span></span>
<span><span class="co">#&gt; 6  string     &lt;NA&gt;    A15            NA      no    NA            &lt;NA&gt;     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "GADSdat" "list"</span></span></code></pre></div>
<p>If both variables have valid but contradicting entries,
<code><a href="../reference/collapseMC_Text.html">collapseMC_Text()</a></code> prefers information from the numerical,
labeled variable (e.g. row 2). If both entries are missing, the behavior
of <code><a href="../reference/collapseMC_Text.html">collapseMC_Text()</a></code> depends on the missing type in the
character variable. If the missing is indicated via an explicit missing
definition (<code>special missing</code> in the example), this missing
code is preferred to missing codes from the numerical, labeled variable
(e.g. row 11). If the missing is indicated via an actual <code>NA</code>
in the character variable, the information from the numerical, labeled
variable is preferred (e.g. row 7).</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># summarize numerical, labeled variable and character variable</span></span>
<span><span class="va">gads</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/collapseMC_Text.html">collapseMC_Text</a></span><span class="op">(</span><span class="va">gads_miss</span>, <span class="st">"mc"</span>, <span class="st">"string"</span>, mc_code4text <span class="op">=</span> <span class="st">"other"</span>, <span class="st">"_r"</span>, <span class="st">"recoded"</span><span class="op">)</span></span>
<span><span class="co">#&gt; No rows removed from meta data.</span></span>
<span><span class="co">#&gt; Adding meta data for the following variables: mc_r</span></span>
<span><span class="va">gads</span><span class="op">$</span><span class="va">dat</span></span>
<span><span class="co">#&gt;    ID  mc          string mc_r</span></span>
<span><span class="co">#&gt; 1   1   2       new valid    3</span></span>
<span><span class="co">#&gt; 2   2   1       new valid    1</span></span>
<span><span class="co">#&gt; 3   3 -99       new valid    3</span></span>
<span><span class="co">#&gt; 4   4 -98       new valid    3</span></span>
<span><span class="co">#&gt; 5   5   2            &lt;NA&gt;    2</span></span>
<span><span class="co">#&gt; 6   6   1            &lt;NA&gt;    1</span></span>
<span><span class="co">#&gt; 7   7 -99            &lt;NA&gt;  -99</span></span>
<span><span class="co">#&gt; 8   8 -98            &lt;NA&gt;  -98</span></span>
<span><span class="co">#&gt; 9   9   2 special missing  -98</span></span>
<span><span class="co">#&gt; 10 10   1 special missing    1</span></span>
<span><span class="co">#&gt; 11 11 -99 special missing  -98</span></span>
<span><span class="co">#&gt; 12 12 -98 special missing  -98</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Benjamin Becker.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
