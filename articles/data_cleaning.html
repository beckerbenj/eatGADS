<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Comprehensive Data Cleaning Guide • eatGADS</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Comprehensive Data Cleaning Guide">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">eatGADS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/createGADS.html">`createGADS`: Creating a relational data base</a></li>
    <li><a class="dropdown-item" href="../articles/data_cleaning.html">Comprehensive Data Cleaning Guide</a></li>
    <li><a class="dropdown-item" href="../articles/getGADS.html">`getGADS`: Using a relational eatGADS data base</a></li>
    <li><a class="dropdown-item" href="../articles/import_raw.html">Handling meta data</a></li>
    <li><a class="dropdown-item" href="../articles/import_spss.html">`import_spss`: Importing data from 'SPSS'</a></li>
    <li><a class="dropdown-item" href="../articles/recoding_forcedChoice.html">Recoding a forced choice item with a text field</a></li>
    <li><a class="dropdown-item" href="../articles/recoding_multipleChoice.html">Recoding a multiple choice item with a text field</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/beckerbenj/eatGADS/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Comprehensive Data Cleaning Guide</h1>
                        <h4 data-toc-skip class="author">Benjamin
Becker, Marlen Holtmann, Johanna Busse</h4>
            
            <h4 data-toc-skip class="date">2024-08-02</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/beckerbenj/eatGADS/blob/master/vignettes/data_cleaning.Rmd" class="external-link"><code>vignettes/data_cleaning.Rmd</code></a></small>
      <div class="d-none name"><code>data_cleaning.Rmd</code></div>
    </div>

    
    
<p><code>eatGADS</code> allows importing data from <code>SPSS</code>
files basically without any loss of data or meta data.
<code>eatGADS</code> stores these data and meta data in so-called
<code>GADSdat</code> objects. These objects are lists of length two,
containing both the data (<code>"dat"</code>) as well as the meta data
(<code>"labels"</code>).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">pisa</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "GADSdat" "list"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">pisa</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "dat"    "labels"</span></span></code></pre></div>
<p>As <code>GADSdat</code> objects have this specific structure,
conventional data modification tools are not suitable for
<code>GADSdat</code> objects. Instead, <code>eatGADS</code> provides
designated data cleaning and data wrangling functions for most common
data cleaning and data wrangling tasks. This is especially relevant for
data cleaning steps that require simultaneous modification of both the
data and the meta data (e.g., recoding of values and value labels).</p>
<p>In this vignette</p>
<ul>
<li>the structure of <code>GADSdat</code>objects is illustrated and</li>
<li>common data cleaning and data wrangling are explained.</li>
</ul>
<p>For illustrative purposes, a small example data set from the campus
files of the German PISA Plus assessment (called <code>pisa</code>) is
used. The complete campus files and the original data set can be
accessed <a href="https://www.iqb.hu-berlin.de/fdz/Datenzugang/CF-Antrag/AntragsformularCF" class="external-link">here</a>
and <a href="https://www.iqb.hu-berlin.de/fdz/Datenzugang/SUF-Antrag" class="external-link">here</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/beckerbenj/eatGADS" class="external-link">eatGADS</a></span><span class="op">)</span></span>
<span><span class="va">gads</span> <span class="op">&lt;-</span> <span class="va">pisa</span></span></code></pre></div>
<div class="section level2">
<h2 id="data-structure">Data structure<a class="anchor" aria-label="anchor" href="#data-structure"></a>
</h2>
<p>The raw data in a <code>GADSdat</code> object are represented as raw,
unlabeled values. They can be accessed via <code>GADSdat$dat</code>. For
the extraction of data suitable for data analyses, see the
<code><a href="../reference/extractData2.html">extractData2()</a></code> function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pisa</span><span class="op">$</span><span class="va">dat</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt;   idstud idschool idclass schtype sameteach</span></span>
<span><span class="co">#&gt; 1      1      127     392       2         2</span></span>
<span><span class="co">#&gt; 2      2       65     201       3         1</span></span>
<span><span class="co">#&gt; 3      3       10      34       1         1</span></span>
<span><span class="co">#&gt; 4      4      103     319       3         2</span></span>
<span><span class="co">#&gt; 5      5       57     179       2         2</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="meta-data-structure">Meta data structure<a class="anchor" aria-label="anchor" href="#meta-data-structure"></a>
</h2>
<p>Meta data are stored in a <code>GADSdat</code> object with the
following structure:</p>
<pre><code><span><span class="co">#&gt;    varName varLabel format display_width labeled value valLabel missings</span></span>
<span><span class="co">#&gt; 17  gender   Gender   F8.0            NA     yes     1   Female    valid</span></span>
<span><span class="co">#&gt; 18  gender   Gender   F8.0            NA     yes     2     Male    valid</span></span></code></pre>
<ul>
<li>
<code>varLabel</code>: a variable label; describes a variable in the
data</li>
<li>
<code>format</code>: the <code>SPSS</code> format of a variable;
<code>F</code> represents numeric, <code>A</code> represents character
variables</li>
<li>
<code>display_width</code>: the display width of a variable in the
<code>SPSS</code> format</li>
<li>
<code>labeled</code>: does the variable contain value labels or
missing tags?</li>
</ul>
<p>On value level, additional meta data can be stored, namely:</p>
<ul>
<li>
<code>valLabel</code>: value labels; labels describing, what a
certain value on a certain variable represents</li>
<li>
<code>missings</code>: missing tags (sometimes also referred to as
missing codes) indicating whether a certain value represents a valid
(<code>"valid"</code>) or a missing (<code>"miss"</code>) value</li>
</ul>
<p>Via the function <code><a href="../reference/extractMeta.html">extractMeta()</a></code> the existing meta data of
one, several or all variables in a <code>GADSdat</code> object can be
inspected. This function is used frequently throughout the vignette to
check whether changes to meta data have been performed successfully.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hisei"</span>, <span class="st">"schtype"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    varName                             varLabel format display_width labeled value</span></span>
<span><span class="co">#&gt; 5  schtype                         School track   F8.0            NA     yes     1</span></span>
<span><span class="co">#&gt; 6  schtype                         School track   F8.0            NA     yes     2</span></span>
<span><span class="co">#&gt; 7  schtype                         School track   F8.0            NA     yes     3</span></span>
<span><span class="co">#&gt; 39   hisei Highest parental occupational status   F8.2            NA      no    NA</span></span>
<span><span class="co">#&gt;                                     valLabel missings</span></span>
<span><span class="co">#&gt; 5                 Gymnasium (academic track)    valid</span></span>
<span><span class="co">#&gt; 6                                 Realschule    valid</span></span>
<span><span class="co">#&gt; 7  schools with several courses of education    valid</span></span>
<span><span class="co">#&gt; 39                                      &lt;NA&gt;     &lt;NA&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="modifying-meta-data">Modifying meta data<a class="anchor" aria-label="anchor" href="#modifying-meta-data"></a>
</h2>
<p>This section discusses changes on meta data level, such as changes to
variable names or labels.</p>
<div class="section level4">
<h4 id="changing-variable-names">Changing variable names<a class="anchor" aria-label="anchor" href="#changing-variable-names"></a>
</h4>
<p>Changes to meta data on variable level are straightforward. Variable
names can be changed with the <code><a href="../reference/changeVarNames.html">changeVarNames()</a></code> function.
The old variable names are overwritten. Multiple variable names can be
adjusted at once.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># inspect original meta data</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads</span>, vars <span class="op">=</span> <span class="st">"hisei"</span><span class="op">)</span></span>
<span><span class="co">#&gt;    varName                             varLabel format display_width labeled value valLabel</span></span>
<span><span class="co">#&gt; 39   hisei Highest parental occupational status   F8.2            NA      no    NA     &lt;NA&gt;</span></span>
<span><span class="co">#&gt;    missings</span></span>
<span><span class="co">#&gt; 39     &lt;NA&gt;</span></span>
<span></span>
<span><span class="co"># Change variable name</span></span>
<span><span class="va">gads_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/changeVarNames.html">changeVarNames</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">gads</span>, oldNames <span class="op">=</span> <span class="st">"hisei"</span>, newNames <span class="op">=</span> <span class="st">"hisei_new"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># inspect modified meta data</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads_labeled</span>, vars <span class="op">=</span> <span class="st">"hisei_new"</span><span class="op">)</span></span>
<span><span class="co">#&gt;      varName                             varLabel format display_width labeled value valLabel</span></span>
<span><span class="co">#&gt; 39 hisei_new Highest parental occupational status   F8.2            NA      no    NA     &lt;NA&gt;</span></span>
<span><span class="co">#&gt;    missings</span></span>
<span><span class="co">#&gt; 39     &lt;NA&gt;</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="changing-variable-labels">Changing variable labels<a class="anchor" aria-label="anchor" href="#changing-variable-labels"></a>
</h4>
<p>Variable labels can be adjusted analogously via the
<code><a href="../reference/changeVarLabels.html">changeVarLabels()</a></code> function. Again, multiple variable labels
can be adjusted at once.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads_labeled</span>, vars <span class="op">=</span> <span class="st">"hisei_new"</span><span class="op">)</span></span>
<span><span class="co">#&gt;      varName                             varLabel format display_width labeled value valLabel</span></span>
<span><span class="co">#&gt; 39 hisei_new Highest parental occupational status   F8.2            NA      no    NA     &lt;NA&gt;</span></span>
<span><span class="co">#&gt;    missings</span></span>
<span><span class="co">#&gt; 39     &lt;NA&gt;</span></span>
<span></span>
<span><span class="co"># Change variable label </span></span>
<span><span class="va">gads_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/changeVarLabels.html">changeVarLabels</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">gads_labeled</span>, varName <span class="op">=</span> <span class="st">"hisei_new"</span>, </span>
<span>                                varLabel <span class="op">=</span> <span class="st">"Parental occupational status (highest)"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads_labeled</span>, vars <span class="op">=</span> <span class="st">"hisei_new"</span><span class="op">)</span></span>
<span><span class="co">#&gt;      varName                               varLabel format display_width labeled value valLabel</span></span>
<span><span class="co">#&gt; 39 hisei_new Parental occupational status (highest)   F8.2            NA      no    NA     &lt;NA&gt;</span></span>
<span><span class="co">#&gt;    missings</span></span>
<span><span class="co">#&gt; 39     &lt;NA&gt;</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="changing-spss-format">Changing SPSS format<a class="anchor" aria-label="anchor" href="#changing-spss-format"></a>
</h4>
<p>The same applies for the <code>SPSS</code> format of a variable using
the <code><a href="../reference/changeSPSSformat.html">changeSPSSformat()</a></code> function.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads_labeled</span>, <span class="st">"hisei_new"</span><span class="op">)</span></span>
<span><span class="co">#&gt;      varName                               varLabel format display_width labeled value valLabel</span></span>
<span><span class="co">#&gt; 39 hisei_new Parental occupational status (highest)   F8.2            NA      no    NA     &lt;NA&gt;</span></span>
<span><span class="co">#&gt;    missings</span></span>
<span><span class="co">#&gt; 39     &lt;NA&gt;</span></span>
<span></span>
<span><span class="co"># Change SPSS format</span></span>
<span><span class="va">gads_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/changeSPSSformat.html">changeSPSSformat</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">gads_labeled</span>, varName <span class="op">=</span> <span class="st">"hisei_new"</span>, </span>
<span>                                 format <span class="op">=</span> <span class="st">"F10.2"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads_labeled</span>, <span class="st">"hisei_new"</span><span class="op">)</span></span>
<span><span class="co">#&gt;      varName                               varLabel format display_width labeled value valLabel</span></span>
<span><span class="co">#&gt; 39 hisei_new Parental occupational status (highest)  F10.2            NA      no    NA     &lt;NA&gt;</span></span>
<span><span class="co">#&gt;    missings</span></span>
<span><span class="co">#&gt; 39     &lt;NA&gt;</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="changing-value-labels">Changing value labels<a class="anchor" aria-label="anchor" href="#changing-value-labels"></a>
</h4>
<p>Changes to meta data on value level follow the same principle. With
the <code><a href="../reference/changeValLabels.html">changeValLabels()</a></code> function, value labels can be added
or modified. Note that value labels and missing codes should be given to
numeric values, even if a variable is a character variable.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Adding value labels</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads_labeled</span>, <span class="st">"hisei_new"</span><span class="op">)</span></span>
<span><span class="co">#&gt;      varName                               varLabel format display_width labeled value valLabel</span></span>
<span><span class="co">#&gt; 39 hisei_new Parental occupational status (highest)  F10.2            NA      no    NA     &lt;NA&gt;</span></span>
<span><span class="co">#&gt;    missings</span></span>
<span><span class="co">#&gt; 39     &lt;NA&gt;</span></span>
<span><span class="va">gads_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/changeValLabels.html">changeValLabels</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">gads_labeled</span>, varName <span class="op">=</span> <span class="st">"hisei_new"</span>, </span>
<span>                                value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">94</span>, <span class="op">-</span><span class="fl">99</span><span class="op">)</span>, valLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"miss1"</span>, <span class="st">"miss2"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads_labeled</span>, <span class="st">"hisei_new"</span><span class="op">)</span></span>
<span><span class="co">#&gt;      varName                               varLabel format display_width labeled value valLabel</span></span>
<span><span class="co">#&gt; 38 hisei_new Parental occupational status (highest)  F10.2            NA     yes   -99    miss2</span></span>
<span><span class="co">#&gt; 39 hisei_new Parental occupational status (highest)  F10.2            NA     yes   -94    miss1</span></span>
<span><span class="co">#&gt;    missings</span></span>
<span><span class="co">#&gt; 38    valid</span></span>
<span><span class="co">#&gt; 39    valid</span></span>
<span></span>
<span><span class="co"># Changing value labels</span></span>
<span><span class="va">gads_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/changeValLabels.html">changeValLabels</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">gads_labeled</span>, varName <span class="op">=</span> <span class="st">"hisei_new"</span>, </span>
<span>                                value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">94</span>, <span class="op">-</span><span class="fl">99</span><span class="op">)</span>, </span>
<span>                                valLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"missing: Question omitted"</span>,</span>
<span>                                             <span class="st">"missing: Not administered"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads_labeled</span>, <span class="st">"hisei_new"</span><span class="op">)</span></span>
<span><span class="co">#&gt;      varName                               varLabel format display_width labeled value</span></span>
<span><span class="co">#&gt; 38 hisei_new Parental occupational status (highest)  F10.2            NA     yes   -99</span></span>
<span><span class="co">#&gt; 39 hisei_new Parental occupational status (highest)  F10.2            NA     yes   -94</span></span>
<span><span class="co">#&gt;                     valLabel missings</span></span>
<span><span class="co">#&gt; 38 missing: Not administered    valid</span></span>
<span><span class="co">#&gt; 39 missing: Question omitted    valid</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="removing-value-labels">Removing value labels<a class="anchor" aria-label="anchor" href="#removing-value-labels"></a>
</h4>
<p>Value labels can be deleted using the <code><a href="../reference/removeValLabels.html">removeValLabels()</a></code>
function.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Removing value labels</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads_labeled</span>, <span class="st">"schtype"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   varName     varLabel format display_width labeled value                                  valLabel</span></span>
<span><span class="co">#&gt; 4 schtype School track   F8.0            NA     yes     1                Gymnasium (academic track)</span></span>
<span><span class="co">#&gt; 5 schtype School track   F8.0            NA     yes     2                                Realschule</span></span>
<span><span class="co">#&gt; 6 schtype School track   F8.0            NA     yes     3 schools with several courses of education</span></span>
<span><span class="co">#&gt;   missings</span></span>
<span><span class="co">#&gt; 4    valid</span></span>
<span><span class="co">#&gt; 5    valid</span></span>
<span><span class="co">#&gt; 6    valid</span></span>
<span><span class="va">gads_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/removeValLabels.html">removeValLabels</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">gads_labeled</span>, varName <span class="op">=</span> <span class="st">"schtype"</span>, </span>
<span>                                value <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads_labeled</span>, <span class="st">"schtype"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   varName     varLabel format display_width labeled value valLabel missings</span></span>
<span><span class="co">#&gt; 4 schtype School track   F8.0            NA      no    NA     &lt;NA&gt;     &lt;NA&gt;</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="changing-missing-tags">Changing missing tags<a class="anchor" aria-label="anchor" href="#changing-missing-tags"></a>
</h4>
<p>Missing tags (sometimes also referred to as missing codes) can be
modified using the <code><a href="../reference/changeMissings.html">changeMissings()</a></code> function. Valid entries
for <code>missings</code> are <code>"miss"</code> and
<code>"valid"</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Defining missings</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads_labeled</span>, <span class="st">"hisei_new"</span><span class="op">)</span></span>
<span><span class="co">#&gt;      varName                               varLabel format display_width labeled value</span></span>
<span><span class="co">#&gt; 38 hisei_new Parental occupational status (highest)  F10.2            NA     yes   -99</span></span>
<span><span class="co">#&gt; 39 hisei_new Parental occupational status (highest)  F10.2            NA     yes   -94</span></span>
<span><span class="co">#&gt;                     valLabel missings</span></span>
<span><span class="co">#&gt; 38 missing: Not administered    valid</span></span>
<span><span class="co">#&gt; 39 missing: Question omitted    valid</span></span>
<span><span class="va">gads_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/changeMissings.html">changeMissings</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">gads_labeled</span>, varName <span class="op">=</span> <span class="st">"hisei_new"</span>, </span>
<span>                               value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">94</span>, <span class="op">-</span><span class="fl">99</span><span class="op">)</span>, missings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"miss"</span>, <span class="st">"miss"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads_labeled</span>, <span class="st">"hisei_new"</span><span class="op">)</span></span>
<span><span class="co">#&gt;      varName                               varLabel format display_width labeled value</span></span>
<span><span class="co">#&gt; 36 hisei_new Parental occupational status (highest)  F10.2            NA     yes   -99</span></span>
<span><span class="co">#&gt; 37 hisei_new Parental occupational status (highest)  F10.2            NA     yes   -94</span></span>
<span><span class="co">#&gt;                     valLabel missings</span></span>
<span><span class="co">#&gt; 36 missing: Not administered     miss</span></span>
<span><span class="co">#&gt; 37 missing: Question omitted     miss</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="checking-and-adjusting-missing-tags-and-value-labels">Checking and adjusting missing tags and value labels<a class="anchor" aria-label="anchor" href="#checking-and-adjusting-missing-tags-and-value-labels"></a>
</h4>
<p>Usually an alignment of value labels and missing codes is desirable.
For example, in the variable <code>hisei_new</code> the value
<code>-94</code> has received a missing tag and the value label
<code>"missing: Questions omitted"</code>. To make these alignments
easier, the functions <code><a href="../reference/checkMissings.html">checkMissings()</a></code> and
<code><a href="../reference/checkMissings.html">checkMissingsByValues()</a></code> exist. <code><a href="../reference/checkMissings.html">checkMissings()</a></code>
allows searching for regular expressions in the value labels and
comparing missing tags and vice versa. Per default, missing codes are
automatically adjusted (<code>addMissingCode = TRUE</code>) and value
label mismatches just reported (<code>addMissingLabel = FALSE</code>).
<code><a href="../reference/checkMissings.html">checkMissingsByValues()</a></code> allows searching for labeled values
in a specific value range (e.g., <code>-50:-99</code>).</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Creating a new value label for a missing value but leaving the missing code as valid</span></span>
<span><span class="va">gads_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/changeValLabels.html">changeValLabels</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">gads_labeled</span>, varName <span class="op">=</span> <span class="st">"gender"</span>, </span>
<span>                                value <span class="op">=</span> <span class="op">-</span><span class="fl">94</span>, valLabel <span class="op">=</span> <span class="st">"missing: Question omitted"</span><span class="op">)</span></span>
<span><span class="co"># Creating a new missing code but leaving the value label empty</span></span>
<span><span class="va">gads_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/changeMissings.html">changeMissings</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">gads_labeled</span>, varName <span class="op">=</span> <span class="st">"gender"</span>, </span>
<span>                                value <span class="op">=</span> <span class="op">-</span><span class="fl">99</span>, missings <span class="op">=</span> <span class="st">"miss"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Checking value label and missing code alignment</span></span>
<span><span class="va">gads_labeled2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/checkMissings.html">checkMissings</a></span><span class="op">(</span><span class="va">gads_labeled</span>, missingLabel <span class="op">=</span> <span class="st">"missing"</span><span class="op">)</span> </span>
<span><span class="co">#&gt; The following variables have value labels including the term 'missing' which are not coded as missing:</span></span>
<span><span class="co">#&gt; gender</span></span>
<span><span class="co">#&gt; 'miss' is inserted into column missings for 1 rows.</span></span>
<span><span class="co">#&gt; The following variables have values coded as missings but value labels do not include the term 'missing':</span></span>
<span><span class="co">#&gt; gender</span></span>
<span></span>
<span><span class="co"># Checking missing tags for a certain value range</span></span>
<span><span class="va">gads_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/checkMissings.html">checkMissingsByValues</a></span><span class="op">(</span><span class="va">gads_labeled</span>, missingValues <span class="op">=</span> <span class="op">-</span><span class="fl">50</span><span class="op">:</span><span class="op">-</span><span class="fl">99</span><span class="op">)</span> </span>
<span><span class="co">#&gt; The following variables have values in the 'missingValues' range which are not coded as missing:</span></span>
<span><span class="co">#&gt; gender</span></span>
<span><span class="co">#&gt; 'miss' is inserted into column missings for 1 rows.</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="reusing-meta-data">Reusing meta data<a class="anchor" aria-label="anchor" href="#reusing-meta-data"></a>
</h4>
<p>Sometimes one variable already contains the meta data which should be
added to another variable. <code><a href="../reference/reuseMeta.html">reuseMeta()</a></code> can copy meta data
from one variable (<code>other_varName</code>) to another variable
(<code>varName</code>), even across different data sets. The function
allows us to transfer the complete meta data, only value labels or a
specific selection of value labels (only valid values or missing codes).
In the example below we transfer only the missing codes from variable
<code>hisei_new</code> to variable <code>age</code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads_labeled</span>, <span class="st">"age"</span><span class="op">)</span></span>
<span><span class="co">#&gt;    varName             varLabel format display_width labeled value valLabel missings</span></span>
<span><span class="co">#&gt; 18     age Age of student at T1   F8.2            NA      no    NA     &lt;NA&gt;     &lt;NA&gt;</span></span>
<span><span class="va">gads_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reuseMeta.html">reuseMeta</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">gads_labeled</span>, varName <span class="op">=</span> <span class="st">"age"</span>,</span>
<span>                          other_GADSdat <span class="op">=</span> <span class="va">gads_labeled</span>, other_varName <span class="op">=</span> <span class="st">"hisei_new"</span>,</span>
<span>                          missingLabels <span class="op">=</span> <span class="st">"only"</span>, addValueLabels <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads_labeled</span>, <span class="st">"age"</span><span class="op">)</span></span>
<span><span class="co">#&gt;    varName             varLabel format display_width labeled value                  valLabel</span></span>
<span><span class="co">#&gt; 18     age Age of student at T1   F8.2            NA     yes   -99 missing: Not administered</span></span>
<span><span class="co">#&gt; 19     age Age of student at T1   F8.2            NA     yes   -94 missing: Question omitted</span></span>
<span><span class="co">#&gt;    missings</span></span>
<span><span class="co">#&gt; 18     miss</span></span>
<span><span class="co">#&gt; 19     miss</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="adding-and-removing-variables">Adding and removing variables<a class="anchor" aria-label="anchor" href="#adding-and-removing-variables"></a>
</h2>
<p>In <code>GADSdat</code> objects, meta data is stored alongside with
the actual data set. Therefore, changes to the actual data often imply
changes to the meta data. If a variable is removed from the data set,
its meta data is no longer needed. If a new variable is created, new
meta data needs to be created. If a variable is recoded, the meta data
entries need to be recoded accordingly.</p>
<div class="section level4">
<h4 id="selecting-or-removing-variables">Selecting or removing variables<a class="anchor" aria-label="anchor" href="#selecting-or-removing-variables"></a>
</h4>
<p>If a certain subset of variables in the <code>GADSdat</code> is
needed, individual variables can either be extracted via
<code><a href="../reference/extractVars.html">extractVars()</a></code> or removed via <code><a href="../reference/extractVars.html">removeVars()</a></code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Selecting variables</span></span>
<span><span class="va">gads_motint</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extractVars.html">extractVars</a></span><span class="op">(</span><span class="va">gads_labeled</span>, </span>
<span>                           vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"int_a"</span>, <span class="st">"int_b"</span>, <span class="st">"int_c"</span>, <span class="st">"int_d"</span>, <span class="st">"instmot_a"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Removing the following rows from meta data: idstud, idschool, idclass, schtype, sameteach, g8g9, ganztag, classsize, repeated, gender, age, language, migration, hisced, hisei_new, homepos, books, pared, computer_age, internet_age, int_use_a, int_use_b, truancy_a, truancy_b, truancy_c, instmot_b, instmot_c, instmot_d, norms_a, norms_b, norms_c, norms_d, norms_e, norms_f, anxiety_a, anxiety_b, anxiety_c, anxiety_d, anxiety_e, selfcon_a, selfcon_b, selfcon_c, selfcon_d, selfcon_e, worketh_a, worketh_b, worketh_c, worketh_d, worketh_e, worketh_f, worketh_g, worketh_h, worketh_i, intent_a, intent_b, intent_c, intent_d, intent_e, behav_a, behav_b, behav_c, behav_d, behav_e, behav_f, behav_g, behav_h, teach_a, teach_b, teach_c, teach_d, teach_e, cognact_a, cognact_b, cognact_c, cognact_d, cognact_e, cognact_f, cognact_g, cognact_h, cognact_i, discpline_a, discpline_b, discpline_c, discpline_d, discpline_e, relation_a, relation_b, relation_c, relation_d, relation_e, belong_a, belong_b, belong_c, belong_d, belong_e, belong_f, belong_g, belong_h, belong_i, attitud_a, attitud_b, attitud_c, attitud_d, attitud_e, attitud_f, attitud_g, attitud_h, grade_de, grade_ma, grade_bio, grade_che, grade_phy, grade_sci, ma_pv1, ma_pv2, ma_pv3, ma_pv4, ma_pv5, rea_pv1, rea_pv2, rea_pv3, rea_pv4, rea_pv5, sci_pv1, sci_pv2, sci_pv3, sci_pv4, sci_pv5</span></span>
<span><span class="co">#&gt; No rows added to meta data.</span></span>
<span><span class="fu"><a href="../reference/namesGADS.html">namesGADS</a></span><span class="op">(</span><span class="va">gads_motint</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "int_a"     "int_b"     "int_c"     "int_d"     "instmot_a"</span></span>
<span></span>
<span><span class="va">gads_int</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extractVars.html">removeVars</a></span><span class="op">(</span><span class="va">gads_motint</span>, vars <span class="op">=</span> <span class="st">"instmot_a"</span><span class="op">)</span> </span>
<span><span class="co">#&gt; Removing the following rows from meta data: instmot_a</span></span>
<span><span class="co">#&gt; No rows added to meta data.</span></span>
<span><span class="fu"><a href="../reference/namesGADS.html">namesGADS</a></span><span class="op">(</span><span class="va">gads_int</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "int_a" "int_b" "int_c" "int_d"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="cloning-a-variable">Cloning a variable<a class="anchor" aria-label="anchor" href="#cloning-a-variable"></a>
</h4>
<p>A variable can be cloned using the <code><a href="../reference/cloneVariable.html">cloneVariable()</a></code>
function. Both the data and meta data are cloned. This function can be
helpful if a modified copy of a variable should be created. For this
purpose, the variable can be cloned and later modified (e.g., via
<code>recodeGADS</code>).</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Clone the variable "sameteach"</span></span>
<span><span class="va">gads_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cloneVariable.html">cloneVariable</a></span><span class="op">(</span><span class="va">gads_labeled</span>, varName <span class="op">=</span> <span class="st">"sameteach"</span>, new_varName <span class="op">=</span> <span class="st">"sameteach2"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="adding-variables">Adding variables<a class="anchor" aria-label="anchor" href="#adding-variables"></a>
</h4>
<p>Adding variables to a <code>GADSdat</code> object is unfortunately
not straight forward and requires utilizing the underlying object
structure. For adding variables, the <code>dat</code> object needs to be
abstracted, so that new variables can be added to it. Afterwards, the
meta data needs to be added using the <code><a href="../reference/updateMeta.html">updateMeta()</a></code>
function.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract the data</span></span>
<span><span class="va">newDat</span> <span class="op">&lt;-</span> <span class="va">gads_labeled</span><span class="op">$</span><span class="va">dat</span></span>
<span><span class="co"># Adding a variable</span></span>
<span><span class="va">newDat</span><span class="op">$</span><span class="va">classsize_kat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">newDat</span><span class="op">$</span><span class="va">classsize</span> <span class="op">&gt;</span> <span class="fl">15</span>, </span>
<span>                                         yes <span class="op">=</span> <span class="st">"big"</span>, no <span class="op">=</span> <span class="st">"small"</span><span class="op">)</span> </span>
<span><span class="co"># Updating meta data</span></span>
<span><span class="va">gads_labeled2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/updateMeta.html">updateMeta</a></span><span class="op">(</span><span class="va">gads_labeled</span>, newDat <span class="op">=</span> <span class="va">newDat</span><span class="op">)</span></span>
<span><span class="co">#&gt; No rows removed from meta data.</span></span>
<span><span class="co">#&gt; Adding meta data for the following variables: classsize_kat</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads_labeled2</span>, <span class="st">"classsize_kat"</span><span class="op">)</span></span>
<span><span class="co">#&gt;                     varName varLabel format display_width labeled value valLabel missings</span></span>
<span><span class="co">#&gt; classsize_kat classsize_kat     &lt;NA&gt;   &lt;NA&gt;            NA      no    NA     &lt;NA&gt;     &lt;NA&gt;</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="recoding">Recoding<a class="anchor" aria-label="anchor" href="#recoding"></a>
</h2>
<p><code>eatGADS</code> provides functionality for the manual and
semi-automatic recoding of variables.</p>
<div class="section level4">
<h4 id="removing-all-values-from-a-variable">Removing all values from a variable<a class="anchor" aria-label="anchor" href="#removing-all-values-from-a-variable"></a>
</h4>
<p>For instance for the purpose of ensuring the anonymity of person in a
data set, it is sometimes desirable to empty sensitive variables. This
can be performed using the <code><a href="../reference/emptyTheseVariables.html">emptyTheseVariables()</a></code>
function.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Empty a variable completely</span></span>
<span><span class="va">gads_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/emptyTheseVariables.html">emptyTheseVariables</a></span><span class="op">(</span><span class="va">gads_labeled</span>, vars <span class="op">=</span> <span class="st">"idschool"</span><span class="op">)</span></span>
<span><span class="co"># Resulting frequency table</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">gads_labeled</span><span class="op">$</span><span class="va">dat</span><span class="op">$</span><span class="va">idschool</span>, useNA <span class="op">=</span> <span class="st">"ifany"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; &lt;NA&gt; </span></span>
<span><span class="co">#&gt;  500</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="manual-recoding">Manual recoding<a class="anchor" aria-label="anchor" href="#manual-recoding"></a>
</h4>
<p>The function <code><a href="../reference/recodeGADS.html">recodeGADS()</a></code> allows the manual recoding of
a variable.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Original data and meta data</span></span>
<span><span class="va">gads_labeled</span><span class="op">$</span><span class="va">dat</span><span class="op">$</span><span class="va">gender</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="co">#&gt;  [1] 1 1 2 2 1 1 2 2 1 1</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads_labeled</span>, <span class="st">"gender"</span><span class="op">)</span></span>
<span><span class="co">#&gt;    varName varLabel format display_width labeled value                  valLabel missings</span></span>
<span><span class="co">#&gt; 14  gender   Gender   F8.0            NA     yes   -99                      &lt;NA&gt;     miss</span></span>
<span><span class="co">#&gt; 15  gender   Gender   F8.0            NA     yes   -94 missing: Question omitted     miss</span></span>
<span><span class="co">#&gt; 16  gender   Gender   F8.0            NA     yes     1                    Female    valid</span></span>
<span><span class="co">#&gt; 17  gender   Gender   F8.0            NA     yes     2                      Male    valid</span></span>
<span><span class="co"># Recoding </span></span>
<span><span class="va">gads_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/recodeGADS.html">recodeGADS</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">gads_labeled</span>, varName <span class="op">=</span> <span class="st">"gender"</span>, </span>
<span>                           oldValues <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, newValues <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># New data and meta data</span></span>
<span><span class="va">gads_labeled</span><span class="op">$</span><span class="va">dat</span><span class="op">$</span><span class="va">gender</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="co">#&gt;  [1] 10 10 20 20 10 10 20 20 10 10</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads_labeled</span>, <span class="st">"gender"</span><span class="op">)</span></span>
<span><span class="co">#&gt;    varName varLabel format display_width labeled value                  valLabel missings</span></span>
<span><span class="co">#&gt; 14  gender   Gender   F8.0            NA     yes   -99                      &lt;NA&gt;     miss</span></span>
<span><span class="co">#&gt; 15  gender   Gender   F8.0            NA     yes   -94 missing: Question omitted     miss</span></span>
<span><span class="co">#&gt; 16  gender   Gender   F8.0            NA     yes    10                    Female    valid</span></span>
<span><span class="co">#&gt; 17  gender   Gender   F8.0            NA     yes    20                      Male    valid</span></span></code></pre></div>
<p>Moreover, <code><a href="../reference/recodeGADS.html">recodeGADS()</a></code> allows recoding values without
value labels or even <code>NA</code> values.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Recoding of NA values </span></span>
<span><span class="va">gads_labeled</span><span class="op">$</span><span class="va">dat</span><span class="op">$</span><span class="va">int_a</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="co">#&gt;  [1]  2  2  3  2  1  2 NA NA NA NA</span></span>
<span><span class="va">gads_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/recodeGADS.html">recodeGADS</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">gads_labeled</span>, varName <span class="op">=</span> <span class="st">"int_a"</span>, </span>
<span>                           oldValues <span class="op">=</span> <span class="cn">NA</span>, newValues <span class="op">=</span> <span class="op">-</span><span class="fl">94</span><span class="op">)</span></span>
<span><span class="va">gads_labeled</span><span class="op">$</span><span class="va">dat</span><span class="op">$</span><span class="va">int_a</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="co">#&gt;  [1]   2   2   3   2   1   2 -94 -94 -94 -94</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="setting-values-to-na">Setting values to NA<a class="anchor" aria-label="anchor" href="#setting-values-to-na"></a>
</h4>
<p>For recoding specific values into <code>NA</code> values, the
function <code><a href="../reference/recode2NA.html">recode2NA()</a></code> exists. It allows recoding a specific
value across multiple variables (while <code><a href="../reference/recodeGADS.html">recodeGADS()</a></code> allows
recoding multiple values for a single variable). Existing value labels
for the specified values are deleted. For each variable it is reported
how many cases have been recoded.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Recoding of values as Missing/NA</span></span>
<span><span class="va">gads_labeled</span><span class="op">$</span><span class="va">dat</span><span class="op">$</span><span class="va">schtype</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="co">#&gt;  [1] 2 3 1 3 2 3 1 3 2 1</span></span>
<span><span class="va">gads_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/recode2NA.html">recode2NA</a></span><span class="op">(</span><span class="va">gads_labeled</span>, recodeVars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hisei_new"</span>, <span class="st">"schtype"</span><span class="op">)</span>, </span>
<span>                          value <span class="op">=</span> <span class="st">"3"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Recodes in variable hisei_new: 0</span></span>
<span><span class="co">#&gt; Recodes in variable schtype: 111</span></span>
<span><span class="va">gads_labeled</span><span class="op">$</span><span class="va">dat</span><span class="op">$</span><span class="va">schtype</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="co">#&gt;  [1]  2 NA  1 NA  2 NA  1 NA  2  1</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="automatically-recoding-a-character-variable-to-a-labeled-numeric-variable">Automatically recoding a character variable to a labeled numeric
variable<a class="anchor" aria-label="anchor" href="#automatically-recoding-a-character-variable-to-a-labeled-numeric-variable"></a>
</h4>
<p>A character variable can be automatically recoded into a labeled
numeric variable via <code><a href="../reference/multiChar2fac.html">multiChar2fac()</a></code>.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example data set</span></span>
<span><span class="va">test_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, varChar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"german"</span>, <span class="st">"English"</span>, </span>
<span>                                            <span class="st">"english"</span>, <span class="st">"POLISH"</span>, <span class="st">"polish"</span><span class="op">)</span>,</span>
<span>                        stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">test_gads</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_DF.html">import_DF</a></span><span class="op">(</span><span class="va">test_df</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Recoding a character variable to numeric</span></span>
<span><span class="va">test_gads2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/multiChar2fac.html">multiChar2fac</a></span><span class="op">(</span><span class="va">test_gads</span>, vars <span class="op">=</span> <span class="st">"varChar"</span>, var_suffix <span class="op">=</span> <span class="st">"_new"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">test_gads2</span>, <span class="st">"varChar_new"</span><span class="op">)</span></span>
<span><span class="co">#&gt;       varName  varLabel format display_width labeled value valLabel missings</span></span>
<span><span class="co">#&gt; 3 varChar_new (recoded)  F10.0            NA     yes     1  english    valid</span></span>
<span><span class="co">#&gt; 4 varChar_new (recoded)  F10.0            NA     yes     2  English    valid</span></span>
<span><span class="co">#&gt; 5 varChar_new (recoded)  F10.0            NA     yes     3   german    valid</span></span>
<span><span class="co">#&gt; 6 varChar_new (recoded)  F10.0            NA     yes     4   polish    valid</span></span>
<span><span class="co">#&gt; 7 varChar_new (recoded)  F10.0            NA     yes     5   POLISH    valid</span></span></code></pre></div>
<p>Via the argument <code>convertCase</code> upper and lower case can be
automatically adjusted.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Recoding a character variable to numeric while simplying case</span></span>
<span><span class="va">test_gads2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/multiChar2fac.html">multiChar2fac</a></span><span class="op">(</span><span class="va">test_gads</span>, vars <span class="op">=</span> <span class="st">"varChar"</span>, var_suffix <span class="op">=</span> <span class="st">"_new"</span>,</span>
<span>                            convertCase <span class="op">=</span> <span class="st">"upperFirst"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">test_gads2</span>, <span class="st">"varChar_new"</span><span class="op">)</span></span>
<span><span class="co">#&gt;       varName  varLabel format display_width labeled value valLabel missings</span></span>
<span><span class="co">#&gt; 3 varChar_new (recoded)  F10.0            NA     yes     1  English    valid</span></span>
<span><span class="co">#&gt; 4 varChar_new (recoded)  F10.0            NA     yes     2   German    valid</span></span>
<span><span class="co">#&gt; 5 varChar_new (recoded)  F10.0            NA     yes     3   Polish    valid</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="automatically-recoding-a-variable-with-a-template">Automatically recoding a variable with a template<a class="anchor" aria-label="anchor" href="#automatically-recoding-a-variable-with-a-template"></a>
</h4>
<p>A variable can be automatically recoded into a labeled numeric
variable via <code><a href="../reference/autoRecode.html">autoRecode()</a></code>. This can be desirable, for
instance, for the recoding of identifier variables.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">id_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1101</span>, <span class="fl">1102</span>, <span class="fl">1103</span>, <span class="fl">1104</span>, <span class="fl">1105</span><span class="op">)</span>, </span>
<span>                    varChar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"german"</span>, <span class="st">"English"</span>, <span class="st">"english"</span>, <span class="st">"POLISH"</span>, <span class="st">"polish"</span><span class="op">)</span>,</span>
<span>                        stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">id_gads</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_DF.html">import_DF</a></span><span class="op">(</span><span class="va">id_df</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Recoding a character variable to numeric</span></span>
<span><span class="va">id_gads2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/autoRecode.html">autoRecode</a></span><span class="op">(</span><span class="va">id_gads</span>, var <span class="op">=</span> <span class="st">"id"</span>, var_suffix <span class="op">=</span> <span class="st">"_new"</span><span class="op">)</span></span>
<span><span class="va">id_gads2</span><span class="op">$</span><span class="va">dat</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"id_new"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;     id id_new</span></span>
<span><span class="co">#&gt; 1 1101      1</span></span>
<span><span class="co">#&gt; 2 1102      2</span></span>
<span><span class="co">#&gt; 3 1103      3</span></span>
<span><span class="co">#&gt; 4 1104      4</span></span>
<span><span class="co">#&gt; 5 1105      5</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="variable-sorting">Variable sorting<a class="anchor" aria-label="anchor" href="#variable-sorting"></a>
</h2>
<p>The sorting of variables in a <code>GADSdat</code> can be adjusted
for individual variables and for the complete set of variables.</p>
<div class="section level4">
<h4 id="relocating-a-specific-variable">Relocating a specific variable<a class="anchor" aria-label="anchor" href="#relocating-a-specific-variable"></a>
</h4>
<p>The function <code><a href="../reference/relocateVariable.html">relocateVariable()</a></code> allows the relocation of
a single variable within a <code>GADSdat</code> object.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/namesGADS.html">namesGADS</a></span><span class="op">(</span><span class="va">gads_labeled</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "idstud"    "idschool"  "idclass"   "schtype"   "sameteach"</span></span>
<span></span>
<span><span class="co"># Relocate a single variable within a the data set</span></span>
<span><span class="va">gads_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/relocateVariable.html">relocateVariable</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">gads_labeled</span>, var <span class="op">=</span> <span class="st">"idschool"</span>,</span>
<span>                           after <span class="op">=</span> <span class="st">"schtype"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/namesGADS.html">namesGADS</a></span><span class="op">(</span><span class="va">gads_labeled</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "idstud"    "idclass"   "schtype"   "idschool"  "sameteach"</span></span>
<span></span>
<span><span class="co"># Relocate a single variable to the beginning of the data set</span></span>
<span><span class="va">gads_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/relocateVariable.html">relocateVariable</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">gads_labeled</span>, var <span class="op">=</span> <span class="st">"idschool"</span>,</span>
<span>                           after <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/namesGADS.html">namesGADS</a></span><span class="op">(</span><span class="va">gads_labeled</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "idschool"  "idstud"    "idclass"   "schtype"   "sameteach"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="ordering-all-variables">Ordering all variables<a class="anchor" aria-label="anchor" href="#ordering-all-variables"></a>
</h4>
<p>The function <code><a href="../reference/orderLike.html">orderLike()</a></code> allows reordering all variables
within a <code>GADSdat</code> object.</p>
</div>
</div>
<div class="section level2">
<h2 id="changing-meta-data-and-data-via-an-excel-sheet">Changing meta data (and data) via an Excel sheet<a class="anchor" aria-label="anchor" href="#changing-meta-data-and-data-via-an-excel-sheet"></a>
</h2>
<p>So far, the introduced functions work well for modifying the meta
data of small data sets or for individual variables. However, we are
frequently interested in modifying the meta data of a larger number of
variables simultaneously. For this purpose <code>eatGADS</code> provides
a workflow that works well with Excel spreadsheets. Thereby changes to
meta data are divided into two levels: the variable and the value
level.</p>
<div class="section level4">
<h4 id="variable-level">Variable level<a class="anchor" aria-label="anchor" href="#variable-level"></a>
</h4>
<p>We start by extracting this change table via the
<code><a href="../reference/getChangeMeta.html">getChangeMeta()</a></code> function.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># variable level</span></span>
<span><span class="va">meta_var</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getChangeMeta.html">getChangeMeta</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">pisa</span>, level <span class="op">=</span> <span class="st">"variable"</span><span class="op">)</span></span></code></pre></div>
<p>While in principle one could modify the change table directly in R,
it is more convenient to do this in Excel. The change table can be
written to <code>.xlsx</code> via the
<code>eatAnalysis::write_xlsx()</code> function. To perform changes,
entries are made into the corresponding “_new”-columns.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># write to Excel</span></span>
<span><span class="fu">eatAnalysis</span><span class="fu">::</span><span class="fu">write_xlsx</span><span class="op">(</span><span class="va">meta_var</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span>, <span class="st">"variable_changes.xlsx"</span><span class="op">)</span></span></code></pre></div>
<p> </p>
<p><img src="changeTable_var.PNG"></p>
<p> </p>
<p>The Excel file can be read back into <code>R</code> via
<code>readxl::read_xlsx()</code>.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># write to Excel</span></span>
<span><span class="va">meta_var_changed</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu">read_excel</span><span class="op">(</span><span class="st">"variable_changes.xlsx"</span>, col_types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"text"</span>, <span class="fl">8</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The <code><a href="../reference/applyChangeMeta.html">applyChangeMeta()</a></code> function applies the meta data
changes to the <code>GADSdat</code> object.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gads2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/applyChangeMeta.html">applyChangeMeta</a></span><span class="op">(</span><span class="va">meta_var_changed</span>, GADSdat <span class="op">=</span> <span class="va">pisa</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads2</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"idstud"</span>, <span class="st">"idschool"</span>, <span class="st">"schoolType"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;      varName                    varLabel format display_width labeled value</span></span>
<span><span class="co">#&gt; 2     idstud Student Identifier Variable   F8.0            NA      no    NA</span></span>
<span><span class="co">#&gt; 3   idschool                   School-ID  F10.0            NA      no    NA</span></span>
<span><span class="co">#&gt; 5 schoolType                School track   F8.0            NA     yes     1</span></span>
<span><span class="co">#&gt; 6 schoolType                School track   F8.0            NA     yes     2</span></span>
<span><span class="co">#&gt; 7 schoolType                School track   F8.0            NA     yes     3</span></span>
<span><span class="co">#&gt;                                    valLabel missings</span></span>
<span><span class="co">#&gt; 2                                      &lt;NA&gt;     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3                                      &lt;NA&gt;     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5                Gymnasium (academic track)    valid</span></span>
<span><span class="co">#&gt; 6                                Realschule    valid</span></span>
<span><span class="co">#&gt; 7 schools with several courses of education    valid</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="value-level">Value level<a class="anchor" aria-label="anchor" href="#value-level"></a>
</h4>
<p>At value level, information on value, value labels or missings can be
changed. The general workflow is identical.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># value level</span></span>
<span><span class="va">meta_val</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getChangeMeta.html">getChangeMeta</a></span><span class="op">(</span>GADSdat <span class="op">=</span> <span class="va">pisa</span>, level <span class="op">=</span> <span class="st">"value"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># write to Excel</span></span>
<span><span class="fu">eatAnalysis</span><span class="fu">::</span><span class="fu">write_xlsx</span><span class="op">(</span><span class="va">meta_val</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span>, <span class="st">"value_changes.xlsx"</span><span class="op">)</span></span></code></pre></div>
<p> </p>
<p><img src="changeTable_val.PNG"></p>
<p> </p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># write to Excel</span></span>
<span><span class="va">meta_val_changed</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu">read_excel</span><span class="op">(</span><span class="st">"value_changes.xlsx"</span>, </span>
<span>                                       col_types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"text"</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"numeric"</span>, <span class="st">"text"</span>, <span class="st">"text"</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gads3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/applyChangeMeta.html">applyChangeMeta</a></span><span class="op">(</span><span class="va">meta_val_changed</span>, GADSdat <span class="op">=</span> <span class="va">pisa</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads3</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"schtype"</span>, <span class="st">"sameteach"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;     varName                               varLabel format display_width labeled value</span></span>
<span><span class="co">#&gt; 4   schtype                           School track   F8.0            NA     yes     1</span></span>
<span><span class="co">#&gt; 5   schtype                           School track   F8.0            NA     yes     2</span></span>
<span><span class="co">#&gt; 6   schtype                           School track   F8.0            NA     yes     3</span></span>
<span><span class="co">#&gt; 7 sameteach Same math teacher in both school years   F8.0            NA     yes    10</span></span>
<span><span class="co">#&gt; 8 sameteach Same math teacher in both school years   F8.0            NA     yes    20</span></span>
<span><span class="co">#&gt;                                    valLabel missings</span></span>
<span><span class="co">#&gt; 4                            Acamedic Track    valid</span></span>
<span><span class="co">#&gt; 5                                Realschule    valid</span></span>
<span><span class="co">#&gt; 6 schools with several courses of education    valid</span></span>
<span><span class="co">#&gt; 7                                        No    valid</span></span>
<span><span class="co">#&gt; 8                                       Yes    valid</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Benjamin Becker.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
