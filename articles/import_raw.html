<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="eatGADS">
<title>Handling meta data • eatGADS</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Handling meta data">
<meta property="og:description" content="eatGADS">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">eatGADS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/createGADS.html">`createGADS`: Creating a relational data base</a>
    <a class="dropdown-item" href="../articles/data_cleaning.html">Comprehensive Data Cleaning Guide</a>
    <a class="dropdown-item" href="../articles/getGADS.html">`getGADS`: Using a relational eatGADS data base</a>
    <a class="dropdown-item" href="../articles/import_raw.html">Handling meta data</a>
    <a class="dropdown-item" href="../articles/import_spss.html">`import_spss`: Importing data from 'SPSS'</a>
    <a class="dropdown-item" href="../articles/recoding_forcedChoice.html">Recoding a forced choice item with a text field</a>
    <a class="dropdown-item" href="../articles/recoding_multipleChoice.html">Recoding a multiple choice item with a text field</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/beckerbenj/eatGADS/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Handling meta data</h1>
                        <h4 data-toc-skip class="author">Benjamin
Becker</h4>
            
            <h4 data-toc-skip class="date">2023-05-17</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/beckerbenj/eatGADS/blob/HEAD/vignettes/import_raw.Rmd" class="external-link"><code>vignettes/import_raw.Rmd</code></a></small>
      <div class="d-none name"><code>import_raw.Rmd</code></div>
    </div>

    
    
<p>When trying to understand data, most often not only the actual data
is required, but also so called meta data. Meta data usually
includes:</p>
<ul>
<li>variable labels: Labels describing, what a variable in the data
represents</li>
<li>value labels: Labels describing, what a certain value on a certain
variable represents</li>
</ul>
<p>While the <code>data.frame</code> class in <code>R</code> supports
value labels to a certain degree with the <code>factor</code> class, its
functionality is limited. Other data formats like <code>.xlsx</code> or
<code>.csv</code> support no meta data at all. Commercial software like
<code>SPSS</code> provides such functionality but can not compete with
the various tools for analyzing data that <code>R</code> provides.</p>
<p><code>eatGADS</code> is an <code>R</code> package that was developed
to bridge this gap. Its main purpose is providing a data format in
<code>R</code> specifically designed for storing meta data together with
data in on place. Therefore it provides an <code>S3</code> class called
<code>GADSdat</code>. The following vignette concentrates on how to
import data into the <code>GADSdat</code> format and work with it in the
<code>R</code> environment. In collaboration with the
<code>IQB Forschungsdatenzentrum (FDZ)</code> the package can also be
used to distribute data.</p>
<p>Note that <code>eatGADS</code> also allows the handling of large
hierarchical data structures via relational data bases. This
functionality is explained in more detail in an additional vignette.</p>
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<p>The package can be installed from GitHub. Note that older R versions
had issues with installations from online repositories like GitHub.
<code>R</code> version <code>&gt; 3.6.0</code> should work without any
issues.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"beckerbenj/eatGADS"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># loading the package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/beckerbenj/eatGADS" class="external-link">eatGADS</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="importing-data-into-the-gadsdat-format">Importing data into the <code>GADSdat</code> format<a class="anchor" aria-label="anchor" href="#importing-data-into-the-gadsdat-format"></a>
</h2>
<div class="section level3">
<h3 id="importing-from-spss">Importing from SPSS<a class="anchor" aria-label="anchor" href="#importing-from-spss"></a>
</h3>
<p><code>R</code> offers a variety of tools to import data from all
sorts of data formats. <code>SPSS</code> data (<code>.sav</code> files)
can be imported directly into the <code>GADSdat</code> format, with
<code>haven</code> used as a backend. Note that this is the easiest way
to import data into the <code>GADSdat</code> format.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># importing an SPSS file</span></span>
<span><span class="va">gads</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_spss.html">import_spss</a></span><span class="op">(</span><span class="st">"path/example.sav"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="importing-from-excel-etc-">Importing from Excel etc.<a class="anchor" aria-label="anchor" href="#importing-from-excel-etc-"></a>
</h3>
<p>All other file types should be imported into <code>R</code> first and
then supplied as <code>data.frames</code> to <code>import_raw</code>.
Below is a small selection of functions that import data as
<code>data.frames</code>. For an extensive overview of importing
functions using the package <code>readr</code> see also <a href="https://r4ds.had.co.nz/data-import.html" class="external-link">this book chapter</a>,
while the package <code>readxl</code> is explained in more detail on
this [homepage] (<a href="https://readxl.tidyverse.org/" class="external-link uri">https://readxl.tidyverse.org/</a>). As these files are plain
data files, meta data has to be supplied as separate data sheets.</p>
<p>Note that none of the <code>data.frames</code> can contain variables
of the class <code>factor</code>, as this in itself constitutes meta
data. If using base <code>R</code> to import data make sure to use the
argument <code>stringsAsFactors = FALSE</code>. If necessary, convert
<code>factors</code> to character via <code>as.character</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># importing text files</span></span>
<span><span class="va">input_txt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span><span class="st">"path/example.txt"</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># importing German csv files (; separated)</span></span>
<span><span class="va">input_csv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv2</a></span><span class="op">(</span><span class="st">"path/example.csv"</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># importing Excel files</span></span>
<span><span class="va">input_xlsx</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu">read_excel</span><span class="op">(</span><span class="st">"path/example.xlsx"</span><span class="op">)</span></span></code></pre></div>
<p><code>import_raw</code> takes three separate <code>data.frames</code>
as input. The actual data set (<code>df</code>), the variable labels
(<code>varLabels</code>) and the value labels (<code>valLabels</code>).
These three objects have to be supplied in a very specific format.</p>
<p>The <code>varLabels</code> object has to contain two variables:
<code>varName</code>, which should exactly correspond to the variable
names in <code>df</code> and <code>varLabels</code> which should contain
the desired variable labels as strings. Note that this
<code>data.frame</code> should contain as many rows as there are
variables in <code>df</code>.</p>
<p>The optional <code>valLabels</code> object has to contain 4
variables: <code>varName</code>, which should exactly correspond to the
variable names in <code>df</code>; <code>values</code>, which should
correspond to the respective values in <code>df</code> and has to be a
numeric vector (labels for character vectors are currently not
supported); <code>valLabels</code>, which should contain the value
labels as strings and <code>missings</code>, a column indicating whether
the value indicates a missing value. Valid values for
<code>missings</code> are <code>"valid"</code> = no missing code and
<code>"miss"</code> = missing code. Note that this
<code>data.frame</code> can not contain any <code>varNames</code> that
are not variables in <code>df</code>. However, not all variables in
<code>df</code> have to occur in <code>valLabels</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example data set</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, </span>
<span>                 forename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Tim"</span>, <span class="st">"Bill"</span>, <span class="st">"Ann"</span>, <span class="st">"Chris"</span><span class="op">)</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># Example variable labels</span></span>
<span><span class="va">varLabels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>varName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ID"</span>, <span class="st">"sex"</span>, <span class="st">"forename"</span><span class="op">)</span>, </span>
<span>                        varLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Person Identifier"</span>, <span class="st">"Sex as self reported"</span>, </span>
<span>                                     <span class="st">"first name as reported by teacher"</span><span class="op">)</span>, </span>
<span>                        stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># Example value labels</span></span>
<span><span class="va">valLabels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>varName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"sex"</span>, <span class="fl">3</span><span class="op">)</span>, </span>
<span>                        value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">99</span><span class="op">)</span>, </span>
<span>                        valLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"male"</span>, <span class="st">"female"</span>, <span class="st">"missing - omission"</span><span class="op">)</span>, </span>
<span>                        missings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"valid"</span>, <span class="st">"valid"</span>, <span class="st">"miss"</span><span class="op">)</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span></span>
<span><span class="co">#&gt;   ID sex forename</span></span>
<span><span class="co">#&gt; 1  1   0      Tim</span></span>
<span><span class="co">#&gt; 2  2   0     Bill</span></span>
<span><span class="co">#&gt; 3  3   1      Ann</span></span>
<span><span class="co">#&gt; 4  4   1    Chris</span></span>
<span><span class="va">varLabels</span></span>
<span><span class="co">#&gt;    varName                          varLabel</span></span>
<span><span class="co">#&gt; 1       ID                 Person Identifier</span></span>
<span><span class="co">#&gt; 2      sex              Sex as self reported</span></span>
<span><span class="co">#&gt; 3 forename first name as reported by teacher</span></span>
<span><span class="va">valLabels</span></span>
<span><span class="co">#&gt;   varName value           valLabel missings</span></span>
<span><span class="co">#&gt; 1     sex     0               male    valid</span></span>
<span><span class="co">#&gt; 2     sex     1             female    valid</span></span>
<span><span class="co">#&gt; 3     sex   -99 missing - omission     miss</span></span>
<span></span>
<span><span class="co"># import </span></span>
<span><span class="va">gads</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_raw.html">import_raw</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">df</span>, varLabels <span class="op">=</span> <span class="va">varLabels</span>, valLabels <span class="op">=</span> <span class="va">valLabels</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="gadsdat-class">
<code>GADSdat</code> class<a class="anchor" aria-label="anchor" href="#gadsdat-class"></a>
</h2>
<p>The resulting object is of the class <code>GADSdat</code> and
contains a data sheet and a meta data sheet.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Inpsect resulting object </span></span>
<span><span class="va">gads</span> </span>
<span><span class="co">#&gt; $dat</span></span>
<span><span class="co">#&gt;   ID sex forename</span></span>
<span><span class="co">#&gt; 1  1   0      Tim</span></span>
<span><span class="co">#&gt; 2  2   0     Bill</span></span>
<span><span class="co">#&gt; 3  3   1      Ann</span></span>
<span><span class="co">#&gt; 4  4   1    Chris</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $labels</span></span>
<span><span class="co">#&gt;    varName                          varLabel format display_width labeled value</span></span>
<span><span class="co">#&gt; 1       ID                 Person Identifier   &lt;NA&gt;            NA      no    NA</span></span>
<span><span class="co">#&gt; 2      sex              Sex as self reported   &lt;NA&gt;            NA     yes   -99</span></span>
<span><span class="co">#&gt; 3      sex              Sex as self reported   &lt;NA&gt;            NA     yes     0</span></span>
<span><span class="co">#&gt; 4      sex              Sex as self reported   &lt;NA&gt;            NA     yes     1</span></span>
<span><span class="co">#&gt; 5 forename first name as reported by teacher   &lt;NA&gt;            NA      no    NA</span></span>
<span><span class="co">#&gt;             valLabel missings</span></span>
<span><span class="co">#&gt; 1               &lt;NA&gt;     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2 missing - omission     miss</span></span>
<span><span class="co">#&gt; 3               male    valid</span></span>
<span><span class="co">#&gt; 4             female    valid</span></span>
<span><span class="co">#&gt; 5               &lt;NA&gt;     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "GADSdat" "list"</span></span></code></pre></div>
<div class="section level3">
<h3 id="saving-gadsdat-objects">Saving <code>GADSdat</code> objects<a class="anchor" aria-label="anchor" href="#saving-gadsdat-objects"></a>
</h3>
<p><code>GADSdat</code> objects can for example be saved as
<code>RDS</code> files. This is also the preferred data format for
distributing <code>GADSdat</code> objects to the <code>FDZ</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Inpsect resulting object </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">gads</span>, <span class="st">"path/gads.RDS"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="using-gadsdat-objects-in-r">Using <code>GADSdat</code> objects in R<a class="anchor" aria-label="anchor" href="#using-gadsdat-objects-in-r"></a>
</h3>
<p><code>eatGADS</code> provides convenient functions for extracting
data and meta data from <code>GADSdat</code> objects.
<code>extractMeta</code> is used to access the meta data for specific
variables (or all variables, if no specific variable name is
provided).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Inpsect resulting object </span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sex"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   varName             varLabel format display_width labeled value</span></span>
<span><span class="co">#&gt; 2     sex Sex as self reported   &lt;NA&gt;            NA     yes   -99</span></span>
<span><span class="co">#&gt; 3     sex Sex as self reported   &lt;NA&gt;            NA     yes     0</span></span>
<span><span class="co">#&gt; 4     sex Sex as self reported   &lt;NA&gt;            NA     yes     1</span></span>
<span><span class="co">#&gt;             valLabel missings</span></span>
<span><span class="co">#&gt; 2 missing - omission     miss</span></span>
<span><span class="co">#&gt; 3               male    valid</span></span>
<span><span class="co">#&gt; 4             female    valid</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads</span><span class="op">)</span></span>
<span><span class="co">#&gt;    varName                          varLabel format display_width labeled value</span></span>
<span><span class="co">#&gt; 1       ID                 Person Identifier   &lt;NA&gt;            NA      no    NA</span></span>
<span><span class="co">#&gt; 2      sex              Sex as self reported   &lt;NA&gt;            NA     yes   -99</span></span>
<span><span class="co">#&gt; 3      sex              Sex as self reported   &lt;NA&gt;            NA     yes     0</span></span>
<span><span class="co">#&gt; 4      sex              Sex as self reported   &lt;NA&gt;            NA     yes     1</span></span>
<span><span class="co">#&gt; 5 forename first name as reported by teacher   &lt;NA&gt;            NA      no    NA</span></span>
<span><span class="co">#&gt;             valLabel missings</span></span>
<span><span class="co">#&gt; 1               &lt;NA&gt;     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2 missing - omission     miss</span></span>
<span><span class="co">#&gt; 3               male    valid</span></span>
<span><span class="co">#&gt; 4             female    valid</span></span>
<span><span class="co">#&gt; 5               &lt;NA&gt;     &lt;NA&gt;</span></span></code></pre></div>
<p><code>extractData</code> is used to extract data. With its arguments
the structure of the resulting data can be defined. If
<code>convertMiss = TRUE</code>, which is the default, is used, values
that are listed as missing codes are recoded to <code>NAs</code>. With
the <code>convertLabels</code> argument it can be specified how value
labels should be used. If set to <code>"character"</code> all labeled
values are recoded to character, the same applies to
“<code>factor</code>”. If set to <code>"numeric"</code>, the value
labels are not applied.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract data without applying labels</span></span>
<span><span class="va">dat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extractData.html">extractData</a></span><span class="op">(</span><span class="va">gads</span>, convertMiss <span class="op">=</span> <span class="cn">TRUE</span>, convertLabels <span class="op">=</span> <span class="st">"numeric"</span><span class="op">)</span></span>
<span><span class="va">dat1</span></span>
<span><span class="co">#&gt;   ID sex forename</span></span>
<span><span class="co">#&gt; 1  1   0      Tim</span></span>
<span><span class="co">#&gt; 2  2   0     Bill</span></span>
<span><span class="co">#&gt; 3  3   1      Ann</span></span>
<span><span class="co">#&gt; 4  4   1    Chris</span></span>
<span></span>
<span><span class="va">dat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extractData.html">extractData</a></span><span class="op">(</span><span class="va">gads</span>, convertMiss <span class="op">=</span> <span class="cn">TRUE</span>, convertLabels <span class="op">=</span> <span class="st">"character"</span><span class="op">)</span></span>
<span><span class="va">dat2</span></span>
<span><span class="co">#&gt;   ID    sex forename</span></span>
<span><span class="co">#&gt; 1  1   male      Tim</span></span>
<span><span class="co">#&gt; 2  2   male     Bill</span></span>
<span><span class="co">#&gt; 3  3 female      Ann</span></span>
<span><span class="co">#&gt; 4  4 female    Chris</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="modifying-gadsdat-objects">Modifying <code>GADSdat</code> objects<a class="anchor" aria-label="anchor" href="#modifying-gadsdat-objects"></a>
</h2>
<p><code>GADSdat</code> objects can also be modified even though only a
certain amount of operations are supported. For smaller changes to the
meta data and data a number of convenience functions exists. These
functions allow modifying variable labels
(<code>chagenVarLabels</code>), modifying variable names
(<code>changeVarNames</code>) and recoding values
(<code>recodeGADS</code>).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### wrapper functions</span></span>
<span><span class="co"># Modify variable labels</span></span>
<span><span class="va">gads2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/changeVarLabels.html">changeVarLabels</a></span><span class="op">(</span><span class="va">gads</span>, varName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ID"</span><span class="op">)</span>, varLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Test taker ID"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads2</span>, vars <span class="op">=</span> <span class="st">"ID"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   varName      varLabel format display_width labeled value valLabel missings</span></span>
<span><span class="co">#&gt; 1      ID Test taker ID   &lt;NA&gt;            NA      no    NA     &lt;NA&gt;     &lt;NA&gt;</span></span>
<span></span>
<span><span class="co"># Modify variable name</span></span>
<span><span class="va">gads3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/changeVarNames.html">changeVarNames</a></span><span class="op">(</span><span class="va">gads</span>, oldNames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ID"</span><span class="op">)</span>, newNames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"idstud"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads3</span>, vars <span class="op">=</span> <span class="st">"idstud"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   varName          varLabel format display_width labeled value valLabel</span></span>
<span><span class="co">#&gt; 1  idstud Person Identifier   &lt;NA&gt;            NA      no    NA     &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   missings</span></span>
<span><span class="co">#&gt; 1     &lt;NA&gt;</span></span>
<span><span class="fu"><a href="../reference/extractData.html">extractData</a></span><span class="op">(</span><span class="va">gads3</span><span class="op">)</span></span>
<span><span class="co">#&gt;   idstud    sex forename</span></span>
<span><span class="co">#&gt; 1      1   male      Tim</span></span>
<span><span class="co">#&gt; 2      2   male     Bill</span></span>
<span><span class="co">#&gt; 3      3 female      Ann</span></span>
<span><span class="co">#&gt; 4      4 female    Chris</span></span>
<span></span>
<span><span class="co"># recode GADS</span></span>
<span><span class="va">gads4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/recodeGADS.html">recodeGADS</a></span><span class="op">(</span><span class="va">gads</span>, varName <span class="op">=</span> <span class="st">"sex"</span>, oldValues <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">99</span><span class="op">)</span>, newValues <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">99</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads4</span>, vars <span class="op">=</span> <span class="st">"sex"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   varName             varLabel format display_width labeled value</span></span>
<span><span class="co">#&gt; 2     sex Sex as self reported   &lt;NA&gt;            NA     yes     1</span></span>
<span><span class="co">#&gt; 3     sex Sex as self reported   &lt;NA&gt;            NA     yes     2</span></span>
<span><span class="co">#&gt; 4     sex Sex as self reported   &lt;NA&gt;            NA     yes    99</span></span>
<span><span class="co">#&gt;             valLabel missings</span></span>
<span><span class="co">#&gt; 2               male    valid</span></span>
<span><span class="co">#&gt; 3             female    valid</span></span>
<span><span class="co">#&gt; 4 missing - omission     miss</span></span>
<span><span class="fu"><a href="../reference/extractData.html">extractData</a></span><span class="op">(</span><span class="va">gads4</span>, convertLabels <span class="op">=</span> <span class="st">"numeric"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ID sex forename</span></span>
<span><span class="co">#&gt; 1  1   1      Tim</span></span>
<span><span class="co">#&gt; 2  2   1     Bill</span></span>
<span><span class="co">#&gt; 3  3   2      Ann</span></span>
<span><span class="co">#&gt; 4  4   2    Chris</span></span></code></pre></div>
<p>For simultaneous changes to multiple variables a set of functions are
implemented that extract a table for changes and apply the changes as
written into this change table. To enable an easier work flow the change
table could also be saved as an Excel file, modified via Excel and again
imported into <code>R</code>. See the help pages of the respective
functions for more details.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># extract changeTable</span></span>
<span><span class="va">varChanges</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getChangeMeta.html">getChangeMeta</a></span><span class="op">(</span><span class="va">gads</span>, level <span class="op">=</span> <span class="st">"variable"</span><span class="op">)</span></span>
<span><span class="co"># modify changeTable</span></span>
<span><span class="va">varChanges</span><span class="op">[</span><span class="va">varChanges</span><span class="op">$</span><span class="va">varName</span> <span class="op">==</span> <span class="st">"ID"</span>, <span class="st">"varLabel_new"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Test taker ID"</span></span>
<span><span class="co"># Apply changes</span></span>
<span><span class="va">gads5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/applyChangeMeta.html">applyChangeMeta</a></span><span class="op">(</span><span class="va">varChanges</span>, <span class="va">gads</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads5</span>, vars <span class="op">=</span> <span class="st">"ID"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   varName      varLabel format display_width labeled value valLabel missings</span></span>
<span><span class="co">#&gt; 1      ID Test taker ID   &lt;NA&gt;            NA      no    NA     &lt;NA&gt;     &lt;NA&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="writing-spss-files">Writing SPSS files<a class="anchor" aria-label="anchor" href="#writing-spss-files"></a>
</h2>
<p>Objects of the class <code>GADSdat</code>can also be exported into
the SPSS format, utilizing <code>haven</code>. Note that this function
is slightly experimental and problems with specific character strings
might occur.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/write_spss.html">write_spss</a></span><span class="op">(</span><span class="va">gads</span>, <span class="st">"path/example_out.sav"</span><span class="op">)</span></span></code></pre></div>
<p>If the <code>haven</code> format is preferred for working in
<code>R</code>, a <code>GADSdat</code> object can also be transformed to
its equivalent <code>tibble</code> format as if the data was imported
from SPSS via <code>haven</code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">haven_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/export_tibble.html">export_tibble</a></span><span class="op">(</span><span class="va">gads</span><span class="op">)</span></span>
<span><span class="va">haven_dat</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 3</span></span></span>
<span><span class="co">#&gt;      ID sex        forename</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;hvn_lbl_&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 0          Tim     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     2 0          Bill    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     3 1          Ann     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     4 1          Chris</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">haven_dat</span>, <span class="va">attributes</span><span class="op">)</span></span>
<span><span class="co">#&gt; $ID</span></span>
<span><span class="co">#&gt; $ID$label</span></span>
<span><span class="co">#&gt; [1] "Person Identifier"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sex</span></span>
<span><span class="co">#&gt; $sex$label</span></span>
<span><span class="co">#&gt; [1] "Sex as self reported"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sex$na_values</span></span>
<span><span class="co">#&gt; [1] -99</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sex$class</span></span>
<span><span class="co">#&gt; [1] "haven_labelled_spss" "haven_labelled"     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sex$labels</span></span>
<span><span class="co">#&gt; missing - omission               male             female </span></span>
<span><span class="co">#&gt;                -99                  0                  1 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $forename</span></span>
<span><span class="co">#&gt; $forename$label</span></span>
<span><span class="co">#&gt; [1] "first name as reported by teacher"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $forename$na_values</span></span>
<span><span class="co">#&gt; character(0)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Benjamin Becker.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
