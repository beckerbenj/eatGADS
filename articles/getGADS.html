<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="eatGADS">
<title>`getGADS`: Using a relational eatGADS data base • eatGADS</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="`getGADS`: Using a relational eatGADS data base">
<meta property="og:description" content="eatGADS">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">eatGADS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/createGADS.html">`createGADS`: Creating a relational data base</a>
    <a class="dropdown-item" href="../articles/data_cleaning.html">Comprehensive Data Cleaning Guide</a>
    <a class="dropdown-item" href="../articles/getGADS.html">`getGADS`: Using a relational eatGADS data base</a>
    <a class="dropdown-item" href="../articles/import_raw.html">Handling meta data</a>
    <a class="dropdown-item" href="../articles/import_spss.html">`import_spss`: Importing data from 'SPSS'</a>
    <a class="dropdown-item" href="../articles/recoding_forcedChoice.html">Recoding a forced choice item with a text field</a>
    <a class="dropdown-item" href="../articles/recoding_multipleChoice.html">Recoding a multiple choice item with a text field</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/beckerbenj/eatGADS/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>`getGADS`: Using a relational eatGADS data base</h1>
                        <h4 data-toc-skip class="author">Benjamin
Becker</h4>
            
            <h4 data-toc-skip class="date">2023-07-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/beckerbenj/eatGADS/blob/HEAD/vignettes/getGADS.Rmd" class="external-link"><code>vignettes/getGADS.Rmd</code></a></small>
      <div class="d-none name"><code>getGADS.Rmd</code></div>
    </div>

    
    
<p>This vignette illustrates how a relational <code>eatGADS</code> data
base can be accessed and used. Therefore, the vignette is targeted at
users who make use of an existing data base.</p>
<p>For illustrative purposes we use a small example data base based on
the campus files of the German PISA Plus assessment. The complete campus
files and the original data set can be accessed <a href="https://www.iqb.hu-berlin.de/fdz/Datenzugang/CF-Antrag/AntragsformularCF" class="external-link">here</a>
and <a href="https://www.iqb.hu-berlin.de/fdz/Datenzugang/SUF-Antrag" class="external-link">here</a>.
The data base is installed alongside <code>eatGADS</code> and the path
can be accessed via the <code><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file()</a></code> function.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/beckerbenj/eatGADS" class="external-link">eatGADS</a></span><span class="op">)</span></span>
<span><span class="va">db_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"pisa.db"</span>, package <span class="op">=</span> <span class="st">"eatGADS"</span><span class="op">)</span></span>
<span><span class="va">db_path</span></span>
<span><span class="co">#&gt; [1] "/home/runner/work/_temp/Library/eatGADS/extdata/pisa.db"</span></span></code></pre></div>
<div class="section level2">
<h2 id="why">Why?<a class="anchor" aria-label="anchor" href="#why"></a>
</h2>
<p>Relational data bases created by <code>eatGADS</code> provide an
alternative way of storing hierarchically structured data (e.g. from
educational large-scale assessments). Compared to conventional
approaches (one big or multiple <code>.sav</code>/<code>.Rdata</code>
files) this yields the following advantages:</p>
<ul>
<li>the data set is often smaller on disk (especially compared to
<code>.sav</code> files)</li>
<li>meta data can be accessed without loading the actual data</li>
<li>no need for reshaping, as the different hierarchy levels can be
accessed independently</li>
<li>saving working memory: often R struggles with large data sets; with
<code>eatGADS</code> we can choose which variables to load into
<code>R</code>
</li>
<li>flexible application of value labels and missing codes for analyses
in <code>R</code>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="inspecting-the-data-base">Inspecting the data base<a class="anchor" aria-label="anchor" href="#inspecting-the-data-base"></a>
</h2>
<p>We can inspect the data base structure with the
<code><a href="../reference/namesGADS.html">namesGADS()</a></code> function. The function returns a named
<code>list</code>. Every list element represents a hierarchy level. The
corresponding character vector contains all variable names on this
hierarchy level.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nam</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/namesGADS.html">namesGADS</a></span><span class="op">(</span><span class="va">db_path</span><span class="op">)</span></span>
<span><span class="va">nam</span></span>
<span><span class="co">#&gt; $noImp</span></span>
<span><span class="co">#&gt;   [1] "idstud"       "idschool"     "idclass"      "schtype"      "sameteach"   </span></span>
<span><span class="co">#&gt;   [6] "g8g9"         "ganztag"      "classsize"    "repeated"     "gender"      </span></span>
<span><span class="co">#&gt;  [11] "age"          "language"     "migration"    "hisced"       "hisei"       </span></span>
<span><span class="co">#&gt;  [16] "homepos"      "books"        "pared"        "computer_age" "internet_age"</span></span>
<span><span class="co">#&gt;  [21] "int_use_a"    "int_use_b"    "truancy_a"    "truancy_b"    "truancy_c"   </span></span>
<span><span class="co">#&gt;  [26] "int_a"        "int_b"        "int_c"        "int_d"        "instmot_a"   </span></span>
<span><span class="co">#&gt;  [31] "instmot_b"    "instmot_c"    "instmot_d"    "norms_a"      "norms_b"     </span></span>
<span><span class="co">#&gt;  [36] "norms_c"      "norms_d"      "norms_e"      "norms_f"      "anxiety_a"   </span></span>
<span><span class="co">#&gt;  [41] "anxiety_b"    "anxiety_c"    "anxiety_d"    "anxiety_e"    "selfcon_a"   </span></span>
<span><span class="co">#&gt;  [46] "selfcon_b"    "selfcon_c"    "selfcon_d"    "selfcon_e"    "worketh_a"   </span></span>
<span><span class="co">#&gt;  [51] "worketh_b"    "worketh_c"    "worketh_d"    "worketh_e"    "worketh_f"   </span></span>
<span><span class="co">#&gt;  [56] "worketh_g"    "worketh_h"    "worketh_i"    "intent_a"     "intent_b"    </span></span>
<span><span class="co">#&gt;  [61] "intent_c"     "intent_d"     "intent_e"     "behav_a"      "behav_b"     </span></span>
<span><span class="co">#&gt;  [66] "behav_c"      "behav_d"      "behav_e"      "behav_f"      "behav_g"     </span></span>
<span><span class="co">#&gt;  [71] "behav_h"      "teach_a"      "teach_b"      "teach_c"      "teach_d"     </span></span>
<span><span class="co">#&gt;  [76] "teach_e"      "cognact_a"    "cognact_b"    "cognact_c"    "cognact_d"   </span></span>
<span><span class="co">#&gt;  [81] "cognact_e"    "cognact_f"    "cognact_g"    "cognact_h"    "cognact_i"   </span></span>
<span><span class="co">#&gt;  [86] "discpline_a"  "discpline_b"  "discpline_c"  "discpline_d"  "discpline_e" </span></span>
<span><span class="co">#&gt;  [91] "relation_a"   "relation_b"   "relation_c"   "relation_d"   "relation_e"  </span></span>
<span><span class="co">#&gt;  [96] "belong_a"     "belong_b"     "belong_c"     "belong_d"     "belong_e"    </span></span>
<span><span class="co">#&gt; [101] "belong_f"     "belong_g"     "belong_h"     "belong_i"     "attitud_a"   </span></span>
<span><span class="co">#&gt; [106] "attitud_b"    "attitud_c"    "attitud_d"    "attitud_e"    "attitud_f"   </span></span>
<span><span class="co">#&gt; [111] "attitud_g"    "attitud_h"    "grade_de"     "grade_ma"     "grade_bio"   </span></span>
<span><span class="co">#&gt; [116] "grade_che"    "grade_phy"    "grade_sci"   </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $PVs</span></span>
<span><span class="co">#&gt; [1] "idstud"    "dimension" "imp"       "value"</span></span></code></pre></div>
<p>The example data base contains two hierarchy levels: A student level
(<code>noImp</code>) and a plausible value level (<code>PVs</code>). On
the student level, each row represents an individual student. On the
plausible value level, each row represents an imputation number of a
specific domain of an individual student.</p>
<p>We can access meta information of the variables in the data set using
the <code><a href="../reference/extractMeta.html">extractMeta()</a></code> function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Meta data for one variable</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">db_path</span>, <span class="st">"age"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   varName             varLabel format display_width labeled value valLabel</span></span>
<span><span class="co">#&gt; 1     age Age of student at T1   F8.2            NA      no    NA     &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   missings data_table</span></span>
<span><span class="co">#&gt; 1     &lt;NA&gt;      noImp</span></span></code></pre></div>
<p>To supply variables names we can also use the named list
<code>nam</code> extracted earlier. This way, we can extract all meta
information available for a hierarchy level.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">db_path</span>, <span class="va">nam</span><span class="op">$</span><span class="va">PVs</span><span class="op">)</span></span>
<span><span class="co">#&gt;       varName                                       varLabel format</span></span>
<span><span class="co">#&gt; 236    idstud                                     Student-ID   F8.0</span></span>
<span><span class="co">#&gt; 451    idstud                                     Student-ID   F8.0</span></span>
<span><span class="co">#&gt; 452 dimension Achievement dimension (math, reading, science)   &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 453 dimension Achievement dimension (math, reading, science)   &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 454 dimension Achievement dimension (math, reading, science)   &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 455       imp       Number of imputation of plausible values   &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 456     value                                Plausible Value   &lt;NA&gt;</span></span>
<span><span class="co">#&gt;     display_width labeled value valLabel missings data_table</span></span>
<span><span class="co">#&gt; 236            NA      no    NA     &lt;NA&gt;     &lt;NA&gt;      noImp</span></span>
<span><span class="co">#&gt; 451            NA      no    NA     &lt;NA&gt;     &lt;NA&gt;        PVs</span></span>
<span><span class="co">#&gt; 452            NA     yes     1       ma    valid        PVs</span></span>
<span><span class="co">#&gt; 453            NA     yes     2      rea    valid        PVs</span></span>
<span><span class="co">#&gt; 454            NA     yes     3      sci    valid        PVs</span></span>
<span><span class="co">#&gt; 455            NA      no    NA     &lt;NA&gt;     &lt;NA&gt;        PVs</span></span>
<span><span class="co">#&gt; 456            NA      no    NA     &lt;NA&gt;     &lt;NA&gt;        PVs</span></span></code></pre></div>
<p>Commonly the most informative columns are <code>varLabel</code>
(containing variable labels), <code>value</code> (referencing labeled
values), <code>valLabel</code> (containing value labels) and
<code>missings</code> (is a labeled value a missing value
(<code>"miss"</code>) or not (<code>"valid"</code>)).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Meta data for manually chosen multiple variables</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">db_path</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"idstud"</span>, <span class="st">"schtype"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;     varName     varLabel format display_width labeled value</span></span>
<span><span class="co">#&gt; 236  idstud   Student-ID   F8.0            NA      no    NA</span></span>
<span><span class="co">#&gt; 360 schtype School track   F8.0            NA     yes     1</span></span>
<span><span class="co">#&gt; 361 schtype School track   F8.0            NA     yes     2</span></span>
<span><span class="co">#&gt; 362 schtype School track   F8.0            NA     yes     3</span></span>
<span><span class="co">#&gt; 451  idstud   Student-ID   F8.0            NA      no    NA</span></span>
<span><span class="co">#&gt;                                      valLabel missings data_table</span></span>
<span><span class="co">#&gt; 236                                      &lt;NA&gt;     &lt;NA&gt;      noImp</span></span>
<span><span class="co">#&gt; 360                Gymnasium (academic track)    valid      noImp</span></span>
<span><span class="co">#&gt; 361                                Realschule    valid      noImp</span></span>
<span><span class="co">#&gt; 362 schools with several courses of education    valid      noImp</span></span>
<span><span class="co">#&gt; 451                                      &lt;NA&gt;     &lt;NA&gt;        PVs</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="extract-data-from-data-base">Extract data from data base<a class="anchor" aria-label="anchor" href="#extract-data-from-data-base"></a>
</h2>
<p>To extract a data set from the data base, we can use the function
<code><a href="../reference/getGADS.html">getGADS()</a></code>. If the data base is stored on a server drive,
<code><a href="../reference/getGADS_fast.html">getGADS_fast()</a></code> provides identical functionality but
substantially increases the performance. With the <code>vSelect</code>
argument we specify our variable selection. It is important to note that
<code><a href="../reference/getGADS.html">getGADS()</a></code> returns a so called <code>GADSdat</code> object.
This object type contains complex meta information (that is for example
also available in a <code>SPSS</code> data set), and is therefore not
directly usable for data analysis. We can, however, use the
<code><a href="../reference/extractMeta.html">extractMeta()</a></code> function on it to access the meta data.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gads1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getGADS.html">getGADS</a></span><span class="op">(</span>filePath <span class="op">=</span> <span class="va">db_path</span>, vSelect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"idstud"</span>, <span class="st">"schtype"</span>, <span class="st">"gender"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">gads1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "GADSdat" "list"</span></span>
<span><span class="fu"><a href="../reference/extractMeta.html">extractMeta</a></span><span class="op">(</span><span class="va">gads1</span><span class="op">)</span></span>
<span><span class="co">#&gt;     varName     varLabel format display_width labeled value</span></span>
<span><span class="co">#&gt; 194  gender       Gender   F8.0            NA     yes     1</span></span>
<span><span class="co">#&gt; 195  gender       Gender   F8.0            NA     yes     2</span></span>
<span><span class="co">#&gt; 236  idstud   Student-ID   F8.0            NA      no    NA</span></span>
<span><span class="co">#&gt; 360 schtype School track   F8.0            NA     yes     1</span></span>
<span><span class="co">#&gt; 361 schtype School track   F8.0            NA     yes     2</span></span>
<span><span class="co">#&gt; 362 schtype School track   F8.0            NA     yes     3</span></span>
<span><span class="co">#&gt;                                      valLabel missings</span></span>
<span><span class="co">#&gt; 194                                    Female    valid</span></span>
<span><span class="co">#&gt; 195                                      Male    valid</span></span>
<span><span class="co">#&gt; 236                                      &lt;NA&gt;     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 360                Gymnasium (academic track)    valid</span></span>
<span><span class="co">#&gt; 361                                Realschule    valid</span></span>
<span><span class="co">#&gt; 362 schools with several courses of education    valid</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="extract-data-from-gadsdat">Extract data from <code>GADSdat</code><a class="anchor" aria-label="anchor" href="#extract-data-from-gadsdat"></a>
</h2>
<p>If we want to use the data for analyses in <code>R</code> we have to
extract it from the <code>GADSdat</code> object via the function
<code><a href="../reference/extractData2.html">extractData2()</a></code>. In doing so, we have to make two important
decisions: (a) how should values marked as missing values be treated
(<code>convertMiss</code>)? And (b) how should labeled values in general
be treated (<code>labels2character</code>, <code>labels2factor</code>,
<code>labels2ordered</code>, and <code>dropPartialLabels</code>)?</p>
<p>Per default, all missing tags are applied, meaning all values tagged
as missing are recoded to <code>NA</code>
(<code>convertMiss == TRUE</code>). Furthermore, per default, all value
labels are dropped (<code>labels2character = NULL</code>,
<code>labels2factor = NULL</code>, <code>labels2ordered = NULL</code>).
If for specific variables, value labels should be applied and the
resulting variable should be a character variable, this can specified
via, for example, setting
<code>labels2character = c("var1", "var2")</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## leave all labeled variables as numeric, convert missings to NA</span></span>
<span><span class="va">dat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extractData2.html">extractData2</a></span><span class="op">(</span><span class="va">gads1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat1</span><span class="op">)</span></span>
<span><span class="co">#&gt;   idstud schtype gender</span></span>
<span><span class="co">#&gt; 1      1       2      1</span></span>
<span><span class="co">#&gt; 2      2       3      1</span></span>
<span><span class="co">#&gt; 3      3       1      2</span></span>
<span><span class="co">#&gt; 4      4       3      2</span></span>
<span><span class="co">#&gt; 5      5       2      1</span></span>
<span><span class="co">#&gt; 6      6       3      1</span></span>
<span></span>
<span><span class="co">## convert selected labeled variable(s) to character, convert missings to NA</span></span>
<span><span class="va">dat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extractData2.html">extractData2</a></span><span class="op">(</span><span class="va">gads1</span>, labels2character <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"schtype"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat2</span><span class="op">)</span></span>
<span><span class="co">#&gt;   idstud                                   schtype gender</span></span>
<span><span class="co">#&gt; 1      1                                Realschule      1</span></span>
<span><span class="co">#&gt; 2      2 schools with several courses of education      1</span></span>
<span><span class="co">#&gt; 3      3                Gymnasium (academic track)      2</span></span>
<span><span class="co">#&gt; 4      4 schools with several courses of education      2</span></span>
<span><span class="co">#&gt; 5      5                                Realschule      1</span></span>
<span><span class="co">#&gt; 6      6 schools with several courses of education      1</span></span>
<span></span>
<span><span class="co">## convert all labeled variables to character, convert missings to NA</span></span>
<span><span class="va">dat3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extractData2.html">extractData2</a></span><span class="op">(</span><span class="va">gads1</span>, labels2character <span class="op">=</span> <span class="fu"><a href="../reference/namesGADS.html">namesGADS</a></span><span class="op">(</span><span class="va">gads1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat3</span><span class="op">)</span></span>
<span><span class="co">#&gt;   idstud                                   schtype gender</span></span>
<span><span class="co">#&gt; 1      1                                Realschule Female</span></span>
<span><span class="co">#&gt; 2      2 schools with several courses of education Female</span></span>
<span><span class="co">#&gt; 3      3                Gymnasium (academic track)   Male</span></span>
<span><span class="co">#&gt; 4      4 schools with several courses of education   Male</span></span>
<span><span class="co">#&gt; 5      5                                Realschule Female</span></span>
<span><span class="co">#&gt; 6      6 schools with several courses of education Female</span></span></code></pre></div>
<p>In general, we recommend leaving labeled variables as numeric and
converting values with missing codes to <code>NA</code>. If required,
values labels can always be accessed via using
<code><a href="../reference/extractMeta.html">extractMeta()</a></code> on the <code>GADSdat</code> object or the
data base.</p>
</div>
<div class="section level2">
<h2 id="selecting-different-hierarchy-levels">Selecting different hierarchy levels<a class="anchor" aria-label="anchor" href="#selecting-different-hierarchy-levels"></a>
</h2>
<p>An important feature of <code>eatGADS</code> relational data bases
are that data sets are automatically returned on the correct hierarchy
level. For an overview of different data structures, see <a href="https://doi.org/10.18637/jss.v059.i10" class="external-link">“Tidy Data”</a> or <a href="https://www.theanalysisfactor.com/wide-and-long-data/" class="external-link">this
article explaining long and wide format using repeated measures</a>. In
educational large-scale assessments, data usually contain multiple
imputations or plausible values. Packages that enable us analyzing these
types of data (like <a href="https://github.com/weirichs/eatRep" class="external-link"><code>eatRep</code></a>) often
require these data in the long format.</p>
<p>The function <code><a href="../reference/getGADS.html">getGADS()</a></code> extracts data automatically in
the appropriate structure, depending on our variable selection. If we
select only variables from the student level, the data returned is on
the student level. Each student is represented in a single row.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gads1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getGADS.html">getGADS</a></span><span class="op">(</span><span class="va">db_path</span>, vSelect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"schtype"</span>, <span class="st">"g8g9"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extractData2.html">extractData2</a></span><span class="op">(</span><span class="va">gads1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">dat1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 500   3</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat1</span><span class="op">)</span></span>
<span><span class="co">#&gt;   idstud schtype g8g9</span></span>
<span><span class="co">#&gt; 1      1       2   NA</span></span>
<span><span class="co">#&gt; 2      2       3   NA</span></span>
<span><span class="co">#&gt; 3      3       1    1</span></span>
<span><span class="co">#&gt; 4      4       3   NA</span></span>
<span><span class="co">#&gt; 5      5       2   NA</span></span>
<span><span class="co">#&gt; 6      6       3   NA</span></span></code></pre></div>
<p>If additionally variables from the plausible Value data table are
extracted, the returned data structure changes. In the <code>PVs</code>
data table, data is stored on the “student x dimension x plausible value
number” level. The returned data has exactly this structure.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gads2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getGADS.html">getGADS</a></span><span class="op">(</span><span class="va">db_path</span>, vSelect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"schtype"</span>, <span class="st">"value"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extractData2.html">extractData2</a></span><span class="op">(</span><span class="va">gads2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">dat2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 7500    5</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat2</span><span class="op">)</span></span>
<span><span class="co">#&gt;   idstud schtype dimension imp       value</span></span>
<span><span class="co">#&gt; 1      1       2         1   1  0.15372011</span></span>
<span><span class="co">#&gt; 2      1       2         2   1  0.43914365</span></span>
<span><span class="co">#&gt; 3      1       2         3   1  0.13177617</span></span>
<span><span class="co">#&gt; 4      1       2         1   2 -0.04119330</span></span>
<span><span class="co">#&gt; 5      1       2         2   2  0.01991714</span></span>
<span><span class="co">#&gt; 6      1       2         3   2  0.67830064</span></span></code></pre></div>
<p>These two examples highlight another feature of
<code><a href="../reference/getGADS.html">getGADS()</a></code>: Only variables of substantial interest have to
be selected for extraction. The correct ID variables are added
automatically.</p>
</div>
<div class="section level2">
<h2 id="trend-data-bases">Trend data bases<a class="anchor" aria-label="anchor" href="#trend-data-bases"></a>
</h2>
<p>In educational large-scale assessments, a common challenge is
reporting longitudinal developments (<em>trends</em>).
<code>getTrendGADS</code> allows extracting data from multiple data
bases with identical variables in it.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trend_path1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"trend_gads_2020.db"</span>, package <span class="op">=</span> <span class="st">"eatGADS"</span><span class="op">)</span></span>
<span><span class="va">trend_path2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"trend_gads_2015.db"</span>, package <span class="op">=</span> <span class="st">"eatGADS"</span><span class="op">)</span></span>
<span><span class="va">trend_path3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"trend_gads_2010.db"</span>, package <span class="op">=</span> <span class="st">"eatGADS"</span><span class="op">)</span></span></code></pre></div>
<p><code>eatGADS</code> comes with three small trend data bases which
can be used for illustrative purposes.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gads_trend</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getTrendGADS.html">getTrendGADS</a></span><span class="op">(</span>filePaths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">trend_path1</span>, <span class="va">trend_path2</span>, <span class="va">trend_path3</span><span class="op">)</span>, </span>
<span>                           vSelect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"idstud"</span>, <span class="st">"dimension"</span>, <span class="st">"score"</span><span class="op">)</span>, </span>
<span>                           years <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2020</span>, <span class="fl">2015</span>, <span class="fl">2010</span><span class="op">)</span>, fast <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;  -----  Loading GADS 2020 ----- </span></span>
<span><span class="co">#&gt;  -----  Loading GADS 2015 ----- </span></span>
<span><span class="co">#&gt;  -----  Loading GADS 2010 -----</span></span>
<span><span class="va">dat_trend</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extractData2.html">extractData2</a></span><span class="op">(</span><span class="va">gads_trend</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat_trend</span><span class="op">)</span></span>
<span><span class="co">#&gt;   idstud dimension imp    score year</span></span>
<span><span class="co">#&gt; 1     61         1   2 434.1060 2020</span></span>
<span><span class="co">#&gt; 2     61         2   2 434.1060 2020</span></span>
<span><span class="co">#&gt; 3     62         1   1 426.8199 2020</span></span>
<span><span class="co">#&gt; 4     62         2   1 426.8199 2020</span></span>
<span><span class="co">#&gt; 5     63         1   2 427.7327 2020</span></span>
<span><span class="co">#&gt; 6     63         2   2 427.7327 2020</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Benjamin Becker.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
