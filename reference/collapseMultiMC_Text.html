<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Recode multiple variables (representing a single multiple choice item) based on multiple character variables
(representing a text field)."><title>Recode multiple choice variable with multiple variables. — collapseMultiMC_Text • eatGADS</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Recode multiple choice variable with multiple variables. — collapseMultiMC_Text"><meta property="og:description" content="Recode multiple variables (representing a single multiple choice item) based on multiple character variables
(representing a text field)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">eatGADS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/createGADS.html">`createGADS`: Creating a relational data base</a>
    <a class="dropdown-item" href="../articles/data_cleaning.html">Comprehensive Data Cleaning Guide</a>
    <a class="dropdown-item" href="../articles/getGADS.html">`getGADS`: Using a relational eatGADS data base</a>
    <a class="dropdown-item" href="../articles/import_raw.html">Handling meta data</a>
    <a class="dropdown-item" href="../articles/import_spss.html">`import_spss`: Importing data from 'SPSS'</a>
    <a class="dropdown-item" href="../articles/recoding_forcedChoice.html">Recoding a forced choice item with a text field</a>
    <a class="dropdown-item" href="../articles/recoding_multipleChoice.html">Recoding a multiple choice item with a text field</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/beckerbenj/eatGADS/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Recode multiple choice variable with multiple variables.</h1>
      <small class="dont-index">Source: <a href="https://github.com/beckerbenj/eatGADS/blob/HEAD/R/collapseMultiMC_Text.R" class="external-link"><code>R/collapseMultiMC_Text.R</code></a></small>
      <div class="d-none name"><code>collapseMultiMC_Text.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Recode multiple variables (representing a single multiple choice item) based on multiple character variables
(representing a text field).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">collapseMultiMC_Text</span><span class="op">(</span></span>
<span>  <span class="va">GADSdat</span>,</span>
<span>  <span class="va">mc_vars</span>,</span>
<span>  <span class="va">text_vars</span>,</span>
<span>  <span class="va">mc_var_4text</span>,</span>
<span>  var_suffix <span class="op">=</span> <span class="st">"_r"</span>,</span>
<span>  label_suffix <span class="op">=</span> <span class="st">"(recoded)"</span>,</span>
<span>  invalid_miss_code <span class="op">=</span> <span class="op">-</span><span class="fl">98</span>,</span>
<span>  invalid_miss_label <span class="op">=</span> <span class="st">"Missing: Invalid response"</span>,</span>
<span>  notext_miss_code <span class="op">=</span> <span class="op">-</span><span class="fl">99</span>,</span>
<span>  notext_miss_label <span class="op">=</span> <span class="st">"Missing: By intention"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>GADSdat</dt>
<dd><p>A <code>GADSdat</code> object.</p></dd>


<dt>mc_vars</dt>
<dd><p>A character vector with the variable names of the multiple choice variable. Names of the character
vector are the corresponding values that are represented by the individual variables.
Creation by <code><a href="matchValues_varLabels.html">matchValues_varLabels</a></code> is recommended.</p></dd>


<dt>text_vars</dt>
<dd><p>A character vector with the names of the text variables which should be collapsed.</p></dd>


<dt>mc_var_4text</dt>
<dd><p>The name of the multiple choice variable that signals that information from the text variable should be used. This variable is recoded according to the final status of the text variables.</p></dd>


<dt>var_suffix</dt>
<dd><p>Variable suffix for the newly created <code>GADSdat</code>. If an empty character, the existing variables are overwritten.</p></dd>


<dt>label_suffix</dt>
<dd><p>Suffix added to variable label for the newly created or modified variables in the <code>GADSdat</code>.</p></dd>


<dt>invalid_miss_code</dt>
<dd><p>Missing code which is given to new character variables if all text entries where recoded into the dichotomous variables.</p></dd>


<dt>invalid_miss_label</dt>
<dd><p>Value label for <code>invalid_miss_code</code>.</p></dd>


<dt>notext_miss_code</dt>
<dd><p>Missing code which is given to empty character variables.</p></dd>


<dt>notext_miss_label</dt>
<dd><p>Value label for <code>notext_miss_code</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Returns a <code>GADSdat</code> containing the newly computed variables.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>If a multiple choice item can be answered with ticking multiple boxes, multiple variables in the data
set are necessary to represent this item. In this case, an additional text field for further answers can also
contain multiple values at once. However, some of the answers in the text field might be redundant to
the dummy variables. <code>collapseMultiMC_Text</code> allows to recode multiple MC items of this
kind based on multiple text variables. The recoding can be prepared by expanding the single text variable
(<code><a href="createLookup.html">createLookup</a></code> and <code><a href="applyLookup_expandVar.html">applyLookup_expandVar</a></code>) and by matching the dummy variables
to its underlying values stored in variable labels (<code><a href="matchValues_varLabels.html">matchValues_varLabels</a></code>).</p>
<p>The function recodes the dummy variables according to the character variables. Additionally, the <code>mc_var_4text</code>
variable is recoded according to the final status of the <code>text_vars</code> (exception: if the text variables were
originally <code>NA</code>, <code>mc_var_4text</code> is left as it was).</p>
<p>Missing values in the character variables can be represented either by <code>NAs</code> or by empty characters.
The multiple choice variables specified with <code>mc_vars</code> can only contain the values <code>0</code>,
<code>1</code> and missing codes. The value <code>1</code> must always represent "this category applies".
If necessary, use <code><a href="recodeGADS.html">recodeGADS</a></code> for recoding.</p>
<p>For cases for which the <code>text_vars</code> contain only values that can be recoded into the <code>mc_vars</code>,
all new <code>text_vars</code> are given specific missing codes (see <code>invalid_miss_code</code> and <code>invalid_miss_label</code>).
All remaining <code>NAs</code> on the character variables are given a specific missing code (<code>notext_miss_code</code>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Prepare example data</span></span></span>
<span class="r-in"><span><span class="va">mt2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, mc1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, mc2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, mc3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  text1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"Eng"</span>, <span class="st">"Aus"</span>, <span class="st">"Aus2"</span><span class="op">)</span>, text2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"Franz"</span>, <span class="cn">NA</span>, <span class="st">"Ger"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mt2_gads</span> <span class="op">&lt;-</span> <span class="fu"><a href="import_DF.html">import_DF</a></span><span class="op">(</span><span class="va">mt2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mt3_gads</span> <span class="op">&lt;-</span> <span class="fu"><a href="changeVarLabels.html">changeVarLabels</a></span><span class="op">(</span><span class="va">mt2_gads</span>, varName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mc1"</span>, <span class="st">"mc2"</span>, <span class="st">"mc3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            varLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lang: Eng"</span>, <span class="st">"Aus spoken"</span>, <span class="st">"other"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## All operations (see also respective help pages of functions for further explanations)</span></span></span>
<span class="r-in"><span><span class="va">mc_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="matchValues_varLabels.html">matchValues_varLabels</a></span><span class="op">(</span><span class="va">mt3_gads</span>, mc_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mc1"</span>, <span class="st">"mc2"</span>, <span class="st">"mc3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Aus"</span>, <span class="st">"Eng"</span>, <span class="st">"Eng"</span><span class="op">)</span>, label_by_hand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"other"</span> <span class="op">=</span> <span class="st">"mc3"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">out_gads</span> <span class="op">&lt;-</span> <span class="fu">collapseMultiMC_Text</span><span class="op">(</span><span class="va">mt3_gads</span>, mc_vars <span class="op">=</span> <span class="va">mc_vars</span>,</span></span>
<span class="r-in"><span>             text_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"text1"</span>, <span class="st">"text2"</span><span class="op">)</span>, mc_var_4text <span class="op">=</span> <span class="st">"mc3"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No rows removed from meta data.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Adding meta data for the following variables: mc1_r, mc2_r, mc3_r, text1_r, text2_r</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">out_gads2</span> <span class="op">&lt;-</span> <span class="fu"><a href="multiChar2fac.html">multiChar2fac</a></span><span class="op">(</span><span class="va">out_gads</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"text1_r"</span>, <span class="st">"text2_r"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">final_gads</span> <span class="op">&lt;-</span> <span class="fu"><a href="remove2NAchar.html">remove2NAchar</a></span><span class="op">(</span><span class="va">out_gads2</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"text1_r_r"</span>, <span class="st">"text2_r_r"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                              max_num <span class="op">=</span> <span class="fl">1</span>, na_value <span class="op">=</span> <span class="op">-</span><span class="fl">99</span>, na_label <span class="op">=</span> <span class="st">"missing: excessive answers"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Removing the following rows from meta data: text2_r_r</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No rows added to meta data.</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Benjamin Becker.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

